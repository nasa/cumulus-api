<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=11' />
    <title>Cumulus API</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link rel="icon" href="favicon.ico">
    <link href='css/base.css' rel='stylesheet' />
    <link href='css/style.css' rel='stylesheet' />
    <link href='css/railscasts.css' rel='stylesheet' />
  </head>
  <body>
    <!--START--><div id='app'><div class="container unlimiter" data-reactroot="" data-reactid="1" data-react-checksum="784524344"><div class="fixed-top fixed-right space-left16" data-reactid="2"><div class="fill-light col6 pin-right" data-reactid="3"></div></div><div class="space-top5 scroll-styled overflow-auto pad1 width16 sidebar fixed-left fill-dark dark" data-reactid="4"><div class="pad0x small" data-reactid="5"><div class="small pad0x quiet space-top1" data-reactid="6">Introduction</div><a href="#cumulus-api" class="line-height15 pad0x pad00y quiet block " data-reactid="7">Cumulus API</a><div class="small pad0x quiet space-top1" data-reactid="8">Versioning</div><a href="#versioning-1" class="line-height15 pad0x pad00y quiet block " data-reactid="9">Versioning</a><div class="small pad0x quiet space-top1" data-reactid="10">Authentication</div><a href="#token" class="line-height15 pad0x pad00y quiet block " data-reactid="11">Token</a><a href="#refresh-token" class="line-height15 pad0x pad00y quiet block " data-reactid="12">Refresh token</a><a href="#delete-token" class="line-height15 pad0x pad00y quiet block " data-reactid="13">Delete token</a><a href="#authorization-header" class="line-height15 pad0x pad00y quiet block " data-reactid="14">Authorization header</a><div class="small pad0x quiet space-top1" data-reactid="15">Providers</div><a href="#list-providers" class="line-height15 pad0x pad00y quiet block " data-reactid="16">List providers</a><a href="#retrieve-provider" class="line-height15 pad0x pad00y quiet block " data-reactid="17">Retrieve provider</a><a href="#create-provider" class="line-height15 pad0x pad00y quiet block " data-reactid="18">Create provider</a><a href="#updatereplace-provider" class="line-height15 pad0x pad00y quiet block " data-reactid="19">Update/replace provider</a><a href="#delete-provider" class="line-height15 pad0x pad00y quiet block " data-reactid="20">Delete provider</a><div class="small pad0x quiet space-top1" data-reactid="21">Collections</div><a href="#list-collections" class="line-height15 pad0x pad00y quiet block " data-reactid="22">List collections</a><a href="#list-collections-with-active-granules" class="line-height15 pad0x pad00y quiet block " data-reactid="23">List collections with active granules</a><a href="#retrieve-collection" class="line-height15 pad0x pad00y quiet block " data-reactid="24">Retrieve collection</a><a href="#create-collection" class="line-height15 pad0x pad00y quiet block " data-reactid="25">Create collection</a><a href="#updatereplace-collection" class="line-height15 pad0x pad00y quiet block " data-reactid="26">Update/replace collection</a><a href="#delete-collection" class="line-height15 pad0x pad00y quiet block " data-reactid="27">Delete collection</a><div class="small pad0x quiet space-top1" data-reactid="28">Granules</div><a href="#list-granules" class="line-height15 pad0x pad00y quiet block " data-reactid="29">List granules</a><a href="#list-granules-with-searchcontext" class="line-height15 pad0x pad00y quiet block " data-reactid="30">List granules with searchContext</a><a href="#retrieve-granule" class="line-height15 pad0x pad00y quiet block " data-reactid="31">Retrieve granule</a><a href="#create-granule" class="line-height15 pad0x pad00y quiet block " data-reactid="32">Create Granule</a><a href="#update-or-replace-granule" class="line-height15 pad0x pad00y quiet block " data-reactid="33">Update or replace granule</a><a href="#associate-execution" class="line-height15 pad0x pad00y quiet block " data-reactid="34">Associate execution</a><a href="#reingest-granule" class="line-height15 pad0x pad00y quiet block " data-reactid="35">Reingest granule</a><a href="#apply-workflow-to-granule" class="line-height15 pad0x pad00y quiet block " data-reactid="36">Apply workflow to granule</a><a href="#move-a-granule" class="line-height15 pad0x pad00y quiet block " data-reactid="37">Move a granule</a><a href="#remove-granule-from-cmr" class="line-height15 pad0x pad00y quiet block " data-reactid="38">Remove granule from CMR</a><a href="#delete-granule" class="line-height15 pad0x pad00y quiet block " data-reactid="39">Delete granule</a><a href="#bulk-operations" class="line-height15 pad0x pad00y quiet block " data-reactid="40">Bulk Operations</a><a href="#bulk-delete" class="line-height15 pad0x pad00y quiet block " data-reactid="41">Bulk Delete</a><a href="#bulk-reingest" class="line-height15 pad0x pad00y quiet block " data-reactid="42">Bulk Reingest</a><div class="small pad0x quiet space-top1" data-reactid="43">PDRs</div><a href="#list-pdrs" class="line-height15 pad0x pad00y quiet block " data-reactid="44">List PDRs</a><a href="#retrieve-pdr" class="line-height15 pad0x pad00y quiet block " data-reactid="45">Retrieve PDR</a><a href="#delete-pdr" class="line-height15 pad0x pad00y quiet block " data-reactid="46">Delete PDR</a><div class="small pad0x quiet space-top1" data-reactid="47">Rules</div><a href="#list-rules" class="line-height15 pad0x pad00y quiet block " data-reactid="48">List rules</a><a href="#retrieve-rule" class="line-height15 pad0x pad00y quiet block " data-reactid="49">Retrieve rule</a><a href="#create-rule" class="line-height15 pad0x pad00y quiet block " data-reactid="50">Create rule</a><a href="#updatereplace-rule" class="line-height15 pad0x pad00y quiet block " data-reactid="51">Update/replace rule</a><a href="#delete-rule" class="line-height15 pad0x pad00y quiet block " data-reactid="52">Delete rule</a><div class="small pad0x quiet space-top1" data-reactid="53">Stats</div><a href="#summary" class="line-height15 pad0x pad00y quiet block " data-reactid="54">Summary</a><a href="#count" class="line-height15 pad0x pad00y quiet block " data-reactid="55">Count</a><div class="small pad0x quiet space-top1" data-reactid="56">Logs</div><a href="#list-logs" class="line-height15 pad0x pad00y quiet block " data-reactid="57">List logs</a><a href="#retrieve-logs" class="line-height15 pad0x pad00y quiet block " data-reactid="58">Retrieve Logs</a><div class="small pad0x quiet space-top1" data-reactid="59">Granule CSV</div><a href="#get-granule-csv-file" class="line-height15 pad0x pad00y quiet block " data-reactid="60">Get Granule CSV file</a><div class="small pad0x quiet space-top1" data-reactid="61">Executions</div><a href="#list-executions" class="line-height15 pad0x pad00y quiet block " data-reactid="62">List executions</a><a href="#retrieve-execution" class="line-height15 pad0x pad00y quiet block " data-reactid="63">Retrieve Execution</a><a href="#retrieve-execution-status" class="line-height15 pad0x pad00y quiet block " data-reactid="64">Retrieve Execution Status</a><a href="#search-executions-by-granules" class="line-height15 pad0x pad00y quiet block " data-reactid="65">Search Executions By Granules</a><a href="#workflows-by-granules" class="line-height15 pad0x pad00y quiet block " data-reactid="66">Workflows By Granules</a><a href="#create-execution" class="line-height15 pad0x pad00y quiet block " data-reactid="67">Create execution</a><a href="#update-or-replace-execution" class="line-height15 pad0x pad00y quiet block " data-reactid="68">Update or replace execution</a><a href="#delete-execution" class="line-height15 pad0x pad00y quiet block " data-reactid="69">Delete execution</a><div class="small pad0x quiet space-top1" data-reactid="70">Workflows</div><a href="#list-workflows" class="line-height15 pad0x pad00y quiet block " data-reactid="71">List workflows</a><a href="#retrieve-workflow" class="line-height15 pad0x pad00y quiet block " data-reactid="72">Retrieve workflow</a><div class="small pad0x quiet space-top1" data-reactid="73">Async Operations</div><a href="#list-async-operations" class="line-height15 pad0x pad00y quiet block " data-reactid="74">List async operations</a><a href="#retrieve-async-operation" class="line-height15 pad0x pad00y quiet block " data-reactid="75">Retrieve async operation</a><div class="small pad0x quiet space-top1" data-reactid="76">Replays</div><a href="#ingest-replays" class="line-height15 pad0x pad00y quiet block " data-reactid="77">Ingest Replays</a><div class="small pad0x quiet space-top1" data-reactid="78">Schemas</div><a href="#retrieve-schema" class="line-height15 pad0x pad00y quiet block " data-reactid="79">Retrieve schema</a><div class="small pad0x quiet space-top1" data-reactid="80">Reconciliation Reports</div><a href="#list-reconciliation-reports" class="line-height15 pad0x pad00y quiet block " data-reactid="81">List reconciliation reports</a><a href="#retrieve-reconciliation-report" class="line-height15 pad0x pad00y quiet block " data-reactid="82">Retrieve reconciliation report</a><a href="#create-reconciliation-report" class="line-height15 pad0x pad00y quiet block " data-reactid="83">Create reconciliation report</a><a href="#delete-reconciliation-report" class="line-height15 pad0x pad00y quiet block " data-reactid="84">Delete reconciliation report</a><div class="small pad0x quiet space-top1" data-reactid="85">EMS Reports</div><a href="#create-ems-reports" class="line-height15 pad0x pad00y quiet block " data-reactid="86">Create EMS reports</a><div class="small pad0x quiet space-top1" data-reactid="87">Instance Metadata</div><a href="#instance-metadata-1" class="line-height15 pad0x pad00y quiet block " data-reactid="88">Instance Metadata</a><div class="small pad0x quiet space-top1" data-reactid="89">Elasticsearch</div><a href="#elasticsearch-1" class="line-height15 pad0x pad00y quiet block " data-reactid="90">Elasticsearch</a><a href="#reindex" class="line-height15 pad0x pad00y quiet block " data-reactid="91">Reindex</a><a href="#reindex-status" class="line-height15 pad0x pad00y quiet block " data-reactid="92">Reindex Status</a><a href="#change-index" class="line-height15 pad0x pad00y quiet block " data-reactid="93">Change Index</a><a href="#index-from-database" class="line-height15 pad0x pad00y quiet block " data-reactid="94">Index from Database</a><a href="#indices-status" class="line-height15 pad0x pad00y quiet block " data-reactid="95">Indices Status</a><a href="#current-index" class="line-height15 pad0x pad00y quiet block " data-reactid="96">Current Index</a><div class="small pad0x quiet space-top1" data-reactid="97">Dashboard</div><a href="#serve-the-dashboard-from-a-bucket" class="line-height15 pad0x pad00y quiet block " data-reactid="98">Serve the dashboard from a bucket</a><div class="small pad0x quiet space-top1" data-reactid="99">ORCA</div><a href="#orca-1" class="line-height15 pad0x pad00y quiet block " data-reactid="100">ORCA</a><div class="small pad0x quiet space-top1" data-reactid="101">Postgres Migration Count</div><a href="#migration-counts" class="line-height15 pad0x pad00y quiet block " data-reactid="102">Migration Counts</a><div class="small pad0x quiet space-top1" data-reactid="103">Dead Letter Archive</div><a href="#recover-cumulus-messages" class="line-height15 pad0x pad00y quiet block " data-reactid="104">Recover cumulus messages</a></div></div><div class="space-left16" data-reactid="105"><div class="" data-reactid="106"><div class="clearfix" data-reactid="107"><div data-title="Cumulus API" class="keyline-top section contain clearfix " data-reactid="108"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="109"><h2 id="cumulus-api">Cumulus API</h2>
<p>The Cumulus API allows developers to interact with the <a href="https://github.com/nasa/cumulus">Cumulus Framework</a>, such as monitoring status or creating, editing, and deleting records. This is the same API that powers the <a href="https://github.com/nasa/cumulus-dashboard">Cumulus dashboard</a>.</p>
<p>By utilizing this API, a developer can integrate with the Cumulus framework in any language or environment; although interacting with Cumulus through the Cumulus dashboard may be appropriate for many end users, for some use cases it's best to have the flexibility of a web-accessible API.</p>
<p>The API accepts and responds with JSON payloads at various HTTPS endpoints.</p>
<p>In order to use these endpoints, you must include authentication information in your HTTPS request; authentication is explained in the following section.</p>
<p>The following table lists the <a href="https://en.wikipedia.org/wiki/Query_string">query string</a> parameters that can be used with most of the Cumulus API endpoints. <code>{fieldName}</code> is a stand-in for any of the fields in the record, and for nested objects dot notation can be used; for example, valid <code>fieldName</code>s include: <code>pdrName</code>, <code>status</code>, and <code>recipe.processStep.description</code>.</p>
<table>
<thead>
<tr>
<th>query string parameter</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>limit={number}</code></td>
<td>number of records to be returned by the API call; default is <code>1</code>, maximum is <code>100</code></td>
</tr>
<tr>
<td><code>page={number}</code></td>
<td>page number, 1-indexed; default is <code>1</code></td>
</tr>
<tr>
<td><code>searchContext={value}</code></td>
<td>searchContext value returned by a previous query, must be included on subsequent queries to maintain the context. Allows listing past 10,000 results. Incompatible with the <code>from</code> and <code>to</code> parameters which will both override searchContext behavior and make the query subject to the 10,000 result cap again.</td>
</tr>
<tr>
<td><code>sort_by={fieldName}</code></td>
<td>which field to sort by; default is <code>timestamp</code></td>
</tr>
<tr>
<td><code>order={asc|desc}</code></td>
<td>whether to sort in <code>asc</code> or <code>desc</code> order</td>
</tr>
<tr>
<td><code>sort_key[]={-fieldName1}&#x26;sort_key[]={fieldName2}</code></td>
<td>One or more sort keys can be specified using the sort_key[] parameter. The order used impacts searching. Fields can be prepended with a <code>-</code> to sort in descending order or a <code>+</code> to sort in ascending. Ascending order is the default. The + must be escaped with %2B</td>
</tr>
<tr>
<td><code>prefix={value}</code></td>
<td><code>startsWith</code> search of the <code>granuleId</code>, <code>status</code>, <code>pdrName</code>, <code>name</code>, <code>error</code>, <code>id</code> and <code>msg</code> fields</td>
</tr>
<tr>
<td><code>infix={value}</code></td>
<td><code>includes</code> search of the <code>granuleId</code>, <code>status</code>, <code>pdrName</code>, <code>name</code>, <code>error</code>, <code>id</code> and <code>msg</code> fields</td>
</tr>
<tr>
<td><code>fields={fieldName1, fieldName2}</code></td>
<td>which fields to return, separated by a comma</td>
</tr>
<tr>
<td><code>{fieldName}={value}</code></td>
<td>exact value match for the given field</td>
</tr>
<tr>
<td><code>{fieldName}__from={number}</code></td>
<td>for numeric fields, field value must be greater than the given number</td>
</tr>
<tr>
<td><code>{fieldName}__to={number}</code></td>
<td>for numeric fields, field value must be less than the given number</td>
</tr>
<tr>
<td><code>{fieldName}__not={value}</code></td>
<td>field does not match the given value</td>
</tr>
<tr>
<td><code>{fieldName}__in={value1, value2}</code></td>
<td>field matches <em>one of</em> the values in the comma-separated list</td>
</tr>
<tr>
<td><code>{fieldName}__exists={true|false}</code></td>
<td>field exists or doesn't exist in the record</td>
</tr>
<tr>
<td><code>q="fieldName:[1 TO 2] AND fieldName2:[3 TO 4]"</code></td>
<td>arbitrary Apache <a href="https://www.elastic.co/guide/en/kibana/current/lucene-query.html">Lucene query syntax</a>, <em>not needed for most uses of the API</em>; if the <code>q</code> parameter is used, all other query parameters will be ignored, besides <code>limit</code>, <code>page</code>, and <code>fields</code></td>
</tr>
</tbody>
</table>
</div></div><div data-title="Versioning" class="keyline-top section contain clearfix " data-reactid="110"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="111"><h2 id="versioning-1">Versioning</h2>
<p>The Cumulus API is versioned and the current version is v1. Retrieve the latest API version from Cumulus.</p>
<p>To use any version, include the version number in the path before the query endpoint. <code>{API_URL}/{version}/{query}</code></p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="112"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/version</div>
    </div>
<h4 id="example-request">Example Request</h4>
<pre class='hljs'>$ curl https://example.com/version</pre>
<h4 id="example-response">Example Response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"response_version"</span>: <span class="hljs-string">"v1"</span>,
    <span class="hljs-attr">"api_version"</span>: <span class="hljs-string">"1.1.1"</span>
}</pre>
</div></div><div data-title="Token" class="keyline-top section contain clearfix " data-reactid="113"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="114"><h2 id="token">Token</h2>
<p>Returns a bearer token using oAuth with <a href="https://urs.earthdata.nasa.gov">Earthdata Login</a> service. The token will be returned as a <a href="https://jwt.io/introduction/">JWT (JSON Web Token)</a>.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="115"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/token</div>
    </div>
</div></div><div data-title="Query Parameters" class="keyline-top section contain clearfix " data-reactid="116"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="117"><h3 id="query-parameters">Query Parameters</h3>
<table>
<thead>
<tr>
<th>query string parameter</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>state={string}</code></td>
<td>The URI to redirect to after if oAuth was successful</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="118"><h4 id="example-request-1">Example request</h4>
<pre class='hljs'>$ curl https://example.com/token</pre>
<h4 id="example-response-1">Example response</h4>
<pre class='hljs'>{<span class="hljs-attr">"token"</span>:<span class="hljs-string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NUb2tlbiI6IjIyMzc0YWE4MDM1M2E3ODFkYWJjYmFhZGJhOGE3ZmMwZmE1MWYzYjQzNWYxNTc4MjU2NjA0ZjFiNGQ0NTE2ODYiLCJleHAiOiIxNTQ0NDY1MDk3ODczIn0.SxFtZ7dqp9KsUSn1uTXhWis8Il8Hig8mwLANGU3cXhY"</span>}</pre>
</div></div><div data-title="Refresh token" class="keyline-top section contain clearfix " data-reactid="119"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="120"><h2 id="refresh-token">Refresh token</h2>
<p>Refreshes a bearer token received from oAuth with <a href="https://urs.earthdata.nasa.gov">Earthdata Login</a> service. The token will be returned as a <a href="https://jwt.io/introduction/">JWT (JSON Web Token)</a>.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="121"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/refresh</div>
    </div>
</div></div><div data-title="Request body" class="keyline-top section contain clearfix " data-reactid="122"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="123"><h3 id="request-body">Request body</h3>
<table>
<thead>
<tr>
<th>parameter</th>
<th>type</th>
<th>required</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>token</code></td>
<td>string</td>
<td><code>true</code></td>
<td>The JWT received from the <code>/token</code> endpoint to refresh</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="124"><h4 id="example-request-2">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/refresh --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NUb2tlbiI6IjIyMzc0YWE4MDM1M2E3ODFkYWJjYmFhZGJhOGE3ZmMwZmE1MWYzYjQzNWYxNTc4MjU2NjA0ZjFiNGQ0NTE2ODYiLCJleHAiOiIxNTQ0NDY1MDk3ODczIn0.SxFtZ7dqp9KsUSn1uTXhWis8Il8Hig8mwLANGU3cXhY"}'</span></pre>
<h4 id="example-response-2">Example response</h4>
<pre class='hljs'>{<span class="hljs-attr">"token"</span>:<span class="hljs-string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NUb2tlbiI6IjIyMzc0YWE4MDM1M2E3ODFkYWJjYmFhZGJhOGE3ZmMwZmE1MWYzYjQzNWYxNTc4MjU2NjA0ZjFiNGQ0NTE2ODYiLCJleHAiOiIxNTQ0NDcxMjk4ODEzIn0.vO6RlSRo47kkH15_muoUYNvv74fRzFxs7FlmVaarHlc"</span>}</pre>
</div></div><div data-title="Delete token" class="keyline-top section contain clearfix " data-reactid="125"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="126"><h2 id="delete-token">Delete token</h2>
<p>Delete the record for an access token received from oAuth with <a href="https://urs.earthdata.nasa.gov">Earthdata Login</a> service.</p>
<p><code>token</code> is the JWT containing access token information to delete</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="127"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/tokenDelete/<span class="strong">{token}</span></div>
    </div>
<h4 id="example-request-3">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/tokenDelete/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NUb2tlbiI6IjIyMzc0YWE4MDM1M2E3ODFkYWJjYmFhZGJhOGE3ZmMwZmE1MWYzYjQzNWYxNTc4MjU2NjA0ZjFiNGQ0NTE2ODYiLCJleHAiOiIxNTQ0NDY1MDk3ODczIn0.SxFtZ7dqp9KsUSn1uTXhWis8Il8Hig8mwLANGU3cXhY</pre>
<h4 id="example-response-3">Example response</h4>
<pre class='hljs'>{<span class="hljs-attr">"message"</span>: <span class="hljs-string">"Token record was deleted"</span>}</pre>
</div></div><div data-title="Authorization header" class="keyline-top section contain clearfix " data-reactid="128"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="129"><h2 id="authorization-header">Authorization header</h2>
<p>When a request is made to the Cumulus API, it must contain a bearer token generated by the API.</p>
<p>The token is generated after the user login with <a href="https://urs.earthdata.nasa.gov">Earthdata Login</a> service.</p>
<p>The token is included in requests using the <code>Authorization</code> header.</p>
<p>If no token is provided, the Cumulus API server will respond with an error, requesting credentials. If an incorrect token is provided, the server will respond with a separate error noting this.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="130"><h4 id="authentication-example">Authentication example</h4>
<pre class='hljs'><span class="hljs-meta">#! /bin/sh
</span>
ORIGIN=$(dirname <span class="hljs-variable">$CUMULUS_BASEURL</span>)
LOGIN_URL=<span class="hljs-string">"<span class="hljs-variable">$CUMULUS_BASEURL</span>/token"</span>

<span class="hljs-comment"># create a base64 hash of your login credentials</span>
AUTH=$(<span class="hljs-built_in">printf</span> <span class="hljs-string">"<span class="hljs-variable">$EARTHDATA_USERNAME</span>:<span class="hljs-variable">$EARTHDATA_PASSWORD</span>"</span> | base64)

<span class="hljs-comment"># Request the Earthdata url with client id and redirect uri to use with Cumulus</span>
AUTHORIZE_URL=$(curl -s -i <span class="hljs-variable">${LOGIN_URL}</span> | grep location | sed -e <span class="hljs-string">"s/^location: //"</span>);

<span class="hljs-comment"># Request an authorization grant code</span>
TOKEN_URL=$(curl -s -i -X POST \
  -F <span class="hljs-string">"credentials=<span class="hljs-variable">${AUTH}</span>"</span> \
  -H <span class="hljs-string">"Origin: <span class="hljs-variable">${ORIGIN}</span>"</span> \
  <span class="hljs-variable">${AUTHORIZE_URL%$'\r'}</span> | grep Location | sed -e <span class="hljs-string">"s/^Location: //"</span>)

<span class="hljs-comment"># Request the token through the CUMULUS API url that's returned from Earthdata</span>
<span class="hljs-comment"># Response is a JSON object of the form { token: String }</span>
<span class="hljs-comment"># This uses the cli tool jq to parse the JSON and get the token string</span>
<span class="hljs-comment"># More info on jq: https://stedolan.github.io/jq/</span>
TOKEN=$(curl -s <span class="hljs-variable">${TOKEN_URL%$'\r'}</span> | jq -r <span class="hljs-string">'.message.token'</span>)

<span class="hljs-built_in">echo</span> <span class="hljs-variable">$TOKEN</span></pre>
</div></div><div data-title="List providers" class="keyline-top section contain clearfix " data-reactid="131"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="132"><h2 id="list-providers">List providers</h2>
<p>List providers in the Cumulus system.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="133"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/providers</div>
    </div>
<h4 id="example-request-4">Example request</h4>
<pre class='hljs'>$ curl https://example.com/providers --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-4">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"daac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"provider"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">2</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"id"</span>: <span class="hljs-string">"HTTP_MODIS"</span>,
            <span class="hljs-attr">"globalConnectionLimit"</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"http"</span>,
            <span class="hljs-attr">"host"</span>: <span class="hljs-string">"https://data.modis.gov/"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1508861082226</span>
        }
    ]
}</pre>
</div></div><div data-title="Retrieve provider" class="keyline-top section contain clearfix " data-reactid="134"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="135"><h2 id="retrieve-provider">Retrieve provider</h2>
<p>Retrieve a single provider.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="136"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/providers/<span class="strong">{id}</span></div>
    </div>
<h4 id="example-request-5">Example request</h4>
<pre class='hljs'>$ curl https://example.com/providers/HTTP_MODIS --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-5">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1508861081785</span>,
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"HTTP_MODIS"</span>,
    <span class="hljs-attr">"host"</span>: <span class="hljs-string">"https://data.modis.gov/"</span>,
    <span class="hljs-attr">"globalConnectionLimit"</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1508861081785</span>,
    <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"http"</span>
}</pre>
</div></div><div data-title="Create provider" class="keyline-top section contain clearfix " data-reactid="137"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="138"><h2 id="create-provider">Create provider</h2>
<p>Create a provider. For more information on creating providers and the contents of a request see <a href="https://nasa.github.io/cumulus/docs/data-cookbooks/setup#providers">the Cumulus setup documentation</a>.</p>
<p>Overview of the schema fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>provider id/name</td>
</tr>
<tr>
<td><code>protocol</code></td>
<td><code>"s3"</code>|<code>"http"</code>|<code>"https"</code>|<code>"ftp"</code></td>
<td>file transfer (sync) protocol</td>
</tr>
<tr>
<td><code>host</code></td>
<td><code>string</code></td>
<td>provider host endpoint</td>
</tr>
<tr>
<td><code>port</code></td>
<td><code>number</code></td>
<td>provider host port</td>
</tr>
<tr>
<td><code>globalConnectionLimit</code></td>
<td><code>number</code></td>
<td>limit to number of concurrent connections</td>
</tr>
<tr>
<td><code>username</code></td>
<td><code>string</code></td>
<td>provider connection username</td>
</tr>
<tr>
<td><code>password</code></td>
<td><code>string</code></td>
<td>provider connection password</td>
</tr>
<tr>
<td><code>privateKey</code></td>
<td><code>string</code></td>
<td>filename assumed to be in s3://bucketInternal/stackName/crypto</td>
</tr>
<tr>
<td><code>cmKeyId</code></td>
<td><code>string</code></td>
<td>AWS KMS Customer Master Key arn or alias</td>
</tr>
<tr>
<td><code>allowedRedirects</code></td>
<td><code>Array&#x3C;string></code></td>
<td>Only hosts in this list will have the provider username/password forwarded for authentication. Entries should be specified as host.com or host.com:7000 if redirect port is different than the provider port.</td>
</tr>
<tr>
<td><code>certificateUri</code></td>
<td><code>string</code></td>
<td>Optional SSL Certificate S3 URI for custom or self-signed SSL (TLS) certificate</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="139"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/providers</div>
    </div>
<h4 id="example-request-6">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/providers --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
    "host": "https://www.example.gov",
    "id": "MY_DAAC_SATELLITE",
    "protocol": "http",
    "globalConnectionLimit": 10
}'</span></pre>
<h4 id="example-response-6">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record saved"</span>,
    <span class="hljs-attr">"record"</span>: {
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1491941727851</span>,
        <span class="hljs-attr">"host"</span>: <span class="hljs-string">"https://www.example.gov"</span>,
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"MY_DAAC_SATELLITE"</span>,
        <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"http"</span>,
        <span class="hljs-attr">"globalConnectionLimit"</span>: <span class="hljs-number">10</span>,
        <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513956151186</span>
    }
}</pre>
</div></div><div data-title="Update/replace provider" class="keyline-top section contain clearfix " data-reactid="140"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="141"><h2 id="updatereplace-provider">Update/replace provider</h2>
<p>Update/replace an existing provider. Expects payload to specify the entire
provider object, and will completely replace the existing provider with the
specified payload. For a field reference see
<a href="#create-provider">"Create provider"</a>.</p>
<p>Returns status 200 on successful replacement, 400 if the <code>id</code> property in the
payload does not match the corresponding value in the resource URI, or 404 if
there is no provider with the specified ID.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="142"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PUT</div>
      <div class='pad0 code small endpoint-url'>/providers/<span class="strong">{id}</span></div>
    </div>
<h4 id="example-request-7">Example request</h4>
<pre class='hljs'>$ curl --request PUT https://example.com/providers/MY_DAAC_SATELLITE --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
  "id": "MY_DAAC_SATELLITE",
  "host": "https://www.example.co.uk",
  "globalConnectionLimit": 10,
  "protocol": "http"
}'</span></pre>
<h4 id="example-successful-response">Example successful response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1491941727851</span>,
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"MY_DAAC_SATELLITE"</span>,
  <span class="hljs-attr">"host"</span>: <span class="hljs-string">"https://www.example.co.uk"</span>,
  <span class="hljs-attr">"globalConnectionLimit"</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1513956150733</span>,
  <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"http"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513956555713</span>
}</pre>
</div></div><div data-title="Delete provider" class="keyline-top section contain clearfix " data-reactid="143"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="144"><h2 id="delete-provider">Delete provider</h2>
<p>Delete a provider from Cumulus. The related PDRs and granules remain in the Cumulus and CMR systems.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="145"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/providers/<span class="strong">{id}</span></div>
    </div>
<h4 id="example-request-8">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/providers/MY_DAAC_SATELLITE --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-7">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record deleted"</span>
}</pre>
</div></div><div data-title="List collections" class="keyline-top section contain clearfix " data-reactid="146"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="147"><h2 id="list-collections">List collections</h2>
<p>List collections in the Cumulus system.</p>
<p>If the query includes a value of <code>true</code> for <code>getMMT</code>, cumulus will search the CMR for each collection and insert the link to the Metadata Management Tool (MMT) into each result under <code>MMTLink</code></p>
<p>If the query includes a value of <code>true</code> for <code>includeStats</code>, cumulus will compute and include the granule aggregation statistics in each collection's return value.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="148"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/collections</div>
    </div>
<h4 id="example-request-9">Example request</h4>
<pre class='hljs'>$ curl https://example.com/collections --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-8">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"collection"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">3</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD11A1"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>,
            <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"MOD11A1"</span>,
            <span class="hljs-attr">"process"</span>: <span class="hljs-string">"modis"</span>,
            <span class="hljs-attr">"provider_path"</span>: <span class="hljs-string">"/"</span>,
            <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}$"</span>,
            <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"(MOD11A1\\..*)\\.hdf"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>,
            <span class="hljs-attr">"files"</span>: [
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^BROWSE\\.MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf\\.met$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf.met"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.cmr\\.xml$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.cmr.xml"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"public"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}_2\\.jpg$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104_2.jpg"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"public"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}_1\\.jpg$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104_1.jpg"</span>
                }
            ],
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513020427284</span>,
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1510761441174</span>,
            <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1513020427162</span>,
            <span class="hljs-attr">"edpa"</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">"some_other_field"</span>: <span class="hljs-string">"field"</span>,
            <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"skip"</span>,
        }
    ]
}</pre>
</div></div><div data-title="List collections with active granules" class="keyline-top section contain clearfix " data-reactid="149"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="150"><h2 id="list-collections-with-active-granules">List collections with active granules</h2>
<p>List collections in the Cumulus system that have active associated granules.</p>
<p>If time parameters are specified, the query will return collections that have granules that have been updated in that time frame.</p>
<p>If the query includes a value of <code>true</code> for <code>getMMT</code>, cumulus will search the CMR for each collection and insert the link to the Metadata Management Tool (MMT) into each result under <code>MMTLink</code></p>
<p>If the query includes a value of <code>true</code> for <code>includeStats</code>, cumulus will compute and include the granule aggregation statistics in each collection's return value.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="151"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/collections/active</div>
    </div>
<h4 id="example-request-10">Example request</h4>
<pre class='hljs'>$ curl https://example.com/collections/active?includeStats=<span class="hljs-literal">true</span> --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-9">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"collection"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">3</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD11A1"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>,
            <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"MOD11A1"</span>,
            <span class="hljs-attr">"process"</span>: <span class="hljs-string">"modis"</span>,
            <span class="hljs-attr">"provider_path"</span>: <span class="hljs-string">"/"</span>,
            <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}$"</span>,
            <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"(MOD11A1\\..*)\\.hdf"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>,
            <span class="hljs-attr">"files"</span>: [
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^BROWSE\\.MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf\\.met$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf.met"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.cmr\\.xml$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.cmr.xml"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"public"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}_2\\.jpg$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104_2.jpg"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"public"</span>,
                    <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}_1\\.jpg$"</span>,
                    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104_1.jpg"</span>
                }
            ],
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513020427284</span>,
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1510761441174</span>,
            <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1513020427162</span>,
            <span class="hljs-attr">"edpa"</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">"some_other_field"</span>: <span class="hljs-string">"field"</span>,
            <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"skip"</span>,
            <span class="hljs-attr">"stats"</span>: {
                <span class="hljs-attr">"running"</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">"completed"</span>: <span class="hljs-number">6</span>,
                <span class="hljs-attr">"failed"</span>: <span class="hljs-number">1</span>,
                <span class="hljs-attr">"total"</span>: <span class="hljs-number">7</span>
            }
        }
    ]
}</pre>
</div></div><div data-title="Retrieve collection" class="keyline-top section contain clearfix " data-reactid="152"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="153"><h2 id="retrieve-collection">Retrieve collection</h2>
<p>Retrieve a single collection.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="154"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/collections/<span class="strong">{name}</span>/<span class="strong">{version}</span></div>
    </div>
<h4 id="example-request-11">Example request</h4>
<pre class='hljs'>$ curl https://example.com/collections/MOD11A1/006 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-10">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"process"</span>: <span class="hljs-string">"modis"</span>,
    <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"(MOD11A1\\..*)\\.hdf"</span>,
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>,
    <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"MOD11A1"</span>,
    <span class="hljs-attr">"some_other_field"</span>: <span class="hljs-string">"field"</span>,
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1510761441174</span>,
    <span class="hljs-attr">"edpa"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD11A1"</span>,
    <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"skip"</span>,
    <span class="hljs-attr">"provider_path"</span>: <span class="hljs-string">"/"</span>,
    <span class="hljs-attr">"files"</span>: [
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>,
            <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf$"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>,
            <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^BROWSE\\.MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf$"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf.met"</span>,
            <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.hdf\\.met$"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.cmr.xml"</span>,
            <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}\\.cmr\\.xml$"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"public"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104_2.jpg"</span>,
            <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}_2\\.jpg$"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"public"</span>,
            <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104_1.jpg"</span>,
            <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}_1\\.jpg$"</span>
        }
    ],
    <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1513020427162</span>,
    <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^MOD11A1\\.A[\\d]{7}\\.[\\S]{6}\\.006.[\\d]{13}$"</span>,
    <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD11A1.A2017025.h21v00.006.2017034065104.hdf"</span>,
}</pre>
</div></div><div data-title="Create collection" class="keyline-top section contain clearfix " data-reactid="155"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="156"><h2 id="create-collection">Create collection</h2>
<p>Create a collection. For more information on creating collections and the contents of a request see <a href="https://nasa.github.io/cumulus/docs/data-cookbooks/setup#collections">the Cumulus setup documentation</a>. A collection generally includes, but is not limited to, the fields listed below.</p>
<p>Overview of the schema fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>collection name</td>
</tr>
<tr>
<td><code>version</code></td>
<td><code>string</code></td>
<td>collection version</td>
</tr>
<tr>
<td><code>dataType</code></td>
<td><code>string</code></td>
<td>matches collection with PDR datatype</td>
</tr>
<tr>
<td><code>duplicateHandling</code></td>
<td><code>"replace"</code>|<code>"version"</code>|<code>"skip"</code>|<code>"error"</code></td>
<td>duplicate handling protocol</td>
</tr>
<tr>
<td><code>process</code></td>
<td><code>string</code></td>
<td>process choice step variable</td>
</tr>
<tr>
<td><code>provider_path</code></td>
<td><code>string</code></td>
<td>path of remote files to sync</td>
</tr>
<tr>
<td><code>granuleId</code></td>
<td><code>string (regex)</code></td>
<td>regex to match granule IDs</td>
</tr>
<tr>
<td><code>granuleIdExtraction</code></td>
<td><code>string (regex)</code></td>
<td>regex to extract ID from files</td>
</tr>
<tr>
<td><code>sampleFileName</code></td>
<td><code>string</code></td>
<td>sample filename for granule ID</td>
</tr>
<tr>
<td><code>url_path</code></td>
<td><code>string</code></td>
<td>s3 prefix template</td>
</tr>
<tr>
<td><code>files</code></td>
<td><code>array</code></td>
<td>array of file specification objects</td>
</tr>
<tr>
<td><code>-- file.bucket</code></td>
<td><code>string</code></td>
<td>file destination bucket</td>
</tr>
<tr>
<td><code>-- file.regex</code></td>
<td><code>string (regex)</code></td>
<td>regex to match file names</td>
</tr>
<tr>
<td><code>-- file.sampleFileName</code></td>
<td><code>string</code></td>
<td>sample filename</td>
</tr>
<tr>
<td><code>-- file.url_path</code></td>
<td><code>string</code></td>
<td>s3 prefix template</td>
</tr>
<tr>
<td><code>-- file.fileType</code></td>
<td><code>string</code></td>
<td>granule file fileType mapping</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="157"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/collections</div>
    </div>
<h4 id="example-request-12">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/collections --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
  "name": "MOD09GQ",
  "version": "006",
  "dataType": "MOD09GQ",
  "process": "modis",
  "duplicateHandling": "replace",
  "provider_path": "cumulus-test-data/pdrs",
  "granuleId": "^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}$",
  "granuleIdExtraction": "(MOD09GQ\\..*)(\\.hdf|\\.cmr|_ndvi\\.jpg)",
  "url_path": "{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{substring(file.name, 0, 3)}",
  "sampleFileName": "MOD09GQ.A2017025.h21v00.006.2017034065104.hdf",
  "files": [
    {
      "bucket": "protected",
      "regex": "^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}\\.hdf$",
      "sampleFileName": "MOD09GQ.A2017025.h21v00.006.2017034065104.hdf",
      "url_path": "{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{extractYear(cmrMetadata.Granule.Temporal.RangeDateTime.BeginningDateTime)}/{substring(file.name, 0, 3)}"
    }
  ]
}'</span></pre>
<h4 id="example-response-11">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record saved"</span>,
    <span class="hljs-attr">"record"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD09GQ"</span>,
        <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>,
        <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"MOD09GQ"</span>,
        <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"replace"</span>,
        <span class="hljs-attr">"process"</span>: <span class="hljs-string">"modis"</span>,
        <span class="hljs-attr">"provider_path"</span>: <span class="hljs-string">"cumulus-test-data/pdrs"</span>,
        <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}$"</span>,
        <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"(MOD09GQ\\..*)(\\.hdf|\\.cmr|_ndvi\\.jpg)"</span>,
        <span class="hljs-attr">"url_path"</span>: <span class="hljs-string">"{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{substring(file.name, 0, 3)}"</span>,
        <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.hdf"</span>,
        <span class="hljs-attr">"files"</span>: [
            {
                <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
                <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}\\.hdf$"</span>,
                <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.hdf"</span>,
                <span class="hljs-attr">"url_path"</span>: <span class="hljs-string">"{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{extractYear(cmrMetadata.Granule.Temporal.RangeDateTime.BeginningDateTime)}/{substring(file.name, 0, 3)}"</span>
            }
        ],
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1491946535919</span>
    }
}</pre>
</div></div><div data-title="Update/replace collection" class="keyline-top section contain clearfix " data-reactid="158"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="159"><h2 id="updatereplace-collection">Update/replace collection</h2>
<p>Update/replace an existing collection. Expects payload to specify the entire
collection object, and will completely replace the existing collection with the
specified payload. For a field reference see
<a href="#create-collection">"Create collection"</a>.</p>
<p>Returns status 200 on successful replacement, 400 if the <code>name</code> or <code>version</code>
property in the payload does not match the corresponding value in the resource
URI, or 404 if there is no collection with the specified name and version.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="160"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PUT</div>
      <div class='pad0 code small endpoint-url'>/collections/<span class="strong">{name}</span>/<span class="strong">{version}</span></div>
    </div>
<h4 id="example-request-13">Example request</h4>
<pre class='hljs'>$ curl --request PUT https://example.com/collections/MOD09GQ/006 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
  "name": "MOD09GQ",
  "version": "006",
  "dataType": "MOD09GQ",
  "duplicateHandling": "error",
  "newNeededField": "myCustomFieldValue",
  "process": "modis",
  "provider_path": "new_path/test-data",
  "granuleId": "^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}$",
  "granuleIdExtraction": "(MOD09GQ\\..*)(\\.hdf|\\.cmr|_ndvi\\.jpg)",
  "url_path": "{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{substring(file.name, 0, 3)}",
  "sampleFileName": "MOD09GQ.A2017025.h21v00.006.2017034065104.hdf",
  "files": [
    {
      "bucket": "protected",
      "regex": "^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}\\.hdf$",
      "sampleFileName": "MOD09GQ.A2017025.h21v00.006.2017034065104.hdf",
      "url_path": "{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{extractYear(cmrMetadata.Granule.Temporal.RangeDateTime.BeginningDateTime)}/{substring(file.name, 0, 3)}"
    }
  ]
}'</span></pre>
<h4 id="example-successful-response-1">Example successful response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD09GQ"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>,
  <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"MOD09GQ"</span>,
  <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"error"</span>,
  <span class="hljs-attr">"newNeededField"</span>: <span class="hljs-string">"myCustomFieldValue"</span>,
  <span class="hljs-attr">"process"</span>: <span class="hljs-string">"modis"</span>,
  <span class="hljs-attr">"provider_path"</span>: <span class="hljs-string">"new_path/test-data"</span>,
  <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}$"</span>,
  <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"(MOD09GQ\\..*)(\\.hdf|\\.cmr|_ndvi\\.jpg)"</span>,
  <span class="hljs-attr">"url_path"</span>: <span class="hljs-string">"{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{substring(file.name, 0, 3)}"</span>,
  <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.hdf"</span>,
  <span class="hljs-attr">"files"</span>: [
    {
      <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
      <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}\\.hdf$"</span>,
      <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.hdf"</span>,
      <span class="hljs-attr">"url_path"</span>: <span class="hljs-string">"{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{extractYear(cmrMetadata.Granule.Temporal.RangeDateTime.BeginningDateTime)}/{substring(file.name, 0, 3)}"</span>
    }
  ],
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1491946535919</span>,
  <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1514304825894</span>
}</pre>
</div></div><div data-title="Delete collection" class="keyline-top section contain clearfix " data-reactid="161"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="162"><h2 id="delete-collection">Delete collection</h2>
<p>Delete a collection from Cumulus, but not from CMR. All related granules in Cumulus must have already been deleted from Cumulus.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="163"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/collections/<span class="strong">{name}</span>/<span class="strong">{version}</span></div>
    </div>
<h4 id="example-request-14">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/collections/MOD09GQ/006 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-12">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record deleted"</span>
}</pre>
</div></div><div data-title="List granules" class="keyline-top section contain clearfix " data-reactid="164"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="165"><h2 id="list-granules">List granules</h2>
<p>List granules in the Cumulus system.
If the query includes a value of <code>true</code> for <code>getRecoveryStatus</code>, <code>recoveryStatus</code> will be included in each granule's return value when applicable.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="166"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/granules</div>
    </div>
<h4 id="example-request-15">Example request</h4>
<pre class='hljs'>$ curl https://example.com/granules --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-13">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"granule"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">"searchContext"</span>: <span class="hljs-string">"%5B%221577836800000%22%5D"</span>,
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755"</span>,
            <span class="hljs-attr">"pdrName"</span>: <span class="hljs-string">"7970bff5-128a-489f-b43c-de4ad7834ce5.PDR"</span>,
            <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD11A1___006"</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"completed"</span>,
            <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"LP_TS2_DataPool"</span>,
            <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:LpdaacCumulusIngestGranuleStateMachine-N3CLGBXRPAT9:7f071dae1a93c9892272b7fd5"</span>,
            <span class="hljs-attr">"files"</span>: [
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-protected"</span>,
                    <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">964704694</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>,
                    <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">1447347</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"data"</span>,
                    <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-private"</span>,
                    <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">121318124</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf.met"</span>,
                    <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">22559</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"metadata"</span>,
                    <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf.met"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-private"</span>,
                    <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">2188150664</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>,
                    <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">18118</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"data"</span>,
                    <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-public"</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_2.jpg"</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"browse"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_2.jpg"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-protected"</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.cmr.xml"</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"metadata"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.cmr.xml"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-public"</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_1.jpg"</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"browse"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_1.jpg"</span>
                }
            ],
            <span class="hljs-attr">"error"</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1513020455831</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513020462156</span>,
            <span class="hljs-attr">"published"</span>: <span class="hljs-string">"https://cmr.uat.earthdata.nasa.gov/search/granules.json?concept_id=G1220753758-CUMULUS"</span>,
            <span class="hljs-attr">"duration"</span>: <span class="hljs-number">6.325</span>,
            <span class="hljs-attr">"cmrLink"</span>: <span class="hljs-string">"https://cmr.uat.earthdata.nasa.gov/search/granules.json?concept_id=G1220753758-CUMULUS"</span>
        }
    ]
}</pre>
</div></div><div data-title="List granules with searchContext" class="keyline-top section contain clearfix " data-reactid="167"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="168"><h2 id="list-granules-with-searchcontext">List granules with searchContext</h2>
<p>List granules in the Cumulus system with searchContext from a previous query.
Must include all of previous query's <code>sort</code>, <code>order</code>, or <code>sort_key</code> query string parameters.
Must not include <code>from</code> and <code>to</code> query string parameters.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="169"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/granules</div>
    </div>
<h4 id="example-request-16">Example request</h4>
<pre class='hljs'>$ curl https://example.com/granules?searchContext=%5B%221577836800000%22%5D --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-14">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"granule"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">"searchContext"</span>: <span class="hljs-string">"%5B%221606780899999%22%5D"</span>,
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755"</span>,
            <span class="hljs-attr">"pdrName"</span>: <span class="hljs-string">"7970bff5-128a-489f-b43c-de4ad7834ce5.PDR"</span>,
            <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD11A1___006"</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"completed"</span>,
            <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"LP_TS2_DataPool"</span>,
            <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:LpdaacCumulusIngestGranuleStateMachine-N3CLGBXRPAT9:7f071dae1a93c9892272b7fd5"</span>,
            <span class="hljs-attr">"files"</span>: [
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-protected"</span>,
                    <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">964704694</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>,
                    <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">1447347</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"data"</span>,
                    <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-private"</span>,
                    <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">121318124</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf.met"</span>,
                    <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">22559</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"metadata"</span>,
                    <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf.met"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-private"</span>,
                    <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">2188150664</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>,
                    <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">18118</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"data"</span>,
                    <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-public"</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_2.jpg"</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"browse"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_2.jpg"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-protected"</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.cmr.xml"</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"metadata"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.cmr.xml"</span>
                },
                {
                    <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-public"</span>,
                    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_1.jpg"</span>,
                    <span class="hljs-attr">"fileType"</span>: <span class="hljs-string">"browse"</span>,
                    <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_1.jpg"</span>
                }
            ],
            <span class="hljs-attr">"error"</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1513020455831</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513020462156</span>,
            <span class="hljs-attr">"published"</span>: <span class="hljs-string">"https://cmr.uat.earthdata.nasa.gov/search/granules.json?concept_id=G1220753758-CUMULUS"</span>,
            <span class="hljs-attr">"duration"</span>: <span class="hljs-number">6.325</span>,
            <span class="hljs-attr">"cmrLink"</span>: <span class="hljs-string">"https://cmr.uat.earthdata.nasa.gov/search/granules.json?concept_id=G1220753758-CUMULUS"</span>
        }
    ]
}</pre>
</div></div><div data-title="Retrieve granule" class="keyline-top section contain clearfix " data-reactid="170"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="171"><h2 id="retrieve-granule">Retrieve granule</h2>
<p>Retrieve a single granule.
If the query includes a value of <code>true</code> for <code>getRecoveryStatus</code>, the returned granule will include <code>recoveryStatus</code> when applicable.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="172"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleId}</span></div>
    </div>
<h4 id="example-request-17">Example request</h4>
<pre class='hljs'>$ curl https://example.com/granules/MOD11A1.A2017137.h20v17.006.2017138085755 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-15">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755"</span>,
    <span class="hljs-attr">"pdrName"</span>: <span class="hljs-string">"7970bff5-128a-489f-b43c-de4ad7834ce5.PDR"</span>,
    <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD11A1___006"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"completed"</span>,
    <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"LP_TS2_DataPool"</span>,
    <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:LpdaacCumulusIngestGranuleStateMachine-N3CLGBXRPAT9:7f071dae1a93c9892272b7fd5"</span>,
    <span class="hljs-attr">"files"</span>: [
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-protected"</span>,
            <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">964704694</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>,
            <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">1447347</span>,
            <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-private"</span>,
            <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">121318124</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf.met"</span>,
            <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">22559</span>,
            <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf.met"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-private"</span>,
            <span class="hljs-attr">"checksum"</span>: <span class="hljs-number">2188150664</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>,
            <span class="hljs-attr">"fileSize"</span>: <span class="hljs-number">18118</span>,
            <span class="hljs-attr">"checksumType"</span>: <span class="hljs-string">"CKSUM"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-protected"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.hdf"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-public"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_2.jpg"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_2.jpg"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-protected"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.cmr.xml"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755.cmr.xml"</span>
        },
        {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-devseed-public"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_1.jpg"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755_1.jpg"</span>
        }
    ],
    <span class="hljs-attr">"error"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1513020455831</span>,
    <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513020462156</span>,
    <span class="hljs-attr">"published"</span>: <span class="hljs-string">"https://cmr.uat.earthdata.nasa.gov/search/granules.json?concept_id=G1220753758-CUMULUS"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-number">6.325</span>,
    <span class="hljs-attr">"cmrLink"</span>: <span class="hljs-string">"https://cmr.uat.earthdata.nasa.gov/search/granules.json?concept_id=G1220753758-CUMULUS"</span>,
    <span class="hljs-attr">"_id"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755"</span>
}</pre>
</div></div><div data-title="Create Granule" class="keyline-top section contain clearfix " data-reactid="173"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="174"><h2 id="create-granule">Create Granule</h2>
<p>Create a granule. A <code>granule</code> can have the following fields.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beginningDateTime</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>The time when the granule's temporal coverage begins</td>
</tr>
<tr>
<td><code>cmrLink</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>link to CMR</td>
</tr>
<tr>
<td><code>collectionId</code></td>
<td><code>string</code></td>
<td><code>yes</code></td>
<td>Collection associated with the granule</td>
</tr>
<tr>
<td><code>createdAt</code></td>
<td><code>integer</code></td>
<td><code>no</code></td>
<td>Time granule record was created (now)</td>
</tr>
<tr>
<td><code>duration</code></td>
<td><code>number</code></td>
<td><code>no</code></td>
<td>Ingest duration milliseconds</td>
</tr>
<tr>
<td><code>endingDateTime</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>The time when the granule's temporal coverage ends</td>
</tr>
<tr>
<td><code>error</code></td>
<td><code>object</code></td>
<td><code>no</code></td>
<td>The error details for this granule</td>
</tr>
<tr>
<td><code>execution</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>Step Function Execution URL</td>
</tr>
<tr>
<td><code>files</code></td>
<td><code>array</code></td>
<td><code>no</code></td>
<td>Files associated with the granule</td>
</tr>
<tr>
<td><code>granuleId</code></td>
<td><code>string</code></td>
<td><code>yes</code></td>
<td>Granule ID</td>
</tr>
<tr>
<td><code>lastUpdateDateTime</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>The date/time that data provider last updated the granule info on data provider's database</td>
</tr>
<tr>
<td><code>pdrName</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>PDR associated with the granule</td>
</tr>
<tr>
<td><code>processingEndDateTime</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>Time processing of granule ends. Usually a StepFunction's stop time</td>
</tr>
<tr>
<td><code>processingStartDateTime</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>Time processing of granule began. Usually a StepFunction's start time</td>
</tr>
<tr>
<td><code>productVolume</code></td>
<td><code>number</code></td>
<td><code>no</code></td>
<td>Sum of the granule's file's sizes in bytes</td>
</tr>
<tr>
<td><code>productionDateTime</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>The date and time a specific granule was produced by a PGE</td>
</tr>
<tr>
<td><code>provider</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>Granule's provider</td>
</tr>
<tr>
<td><code>published</code></td>
<td><code>boolean</code></td>
<td><code>no</code></td>
<td>If granule is published to CMR</td>
</tr>
<tr>
<td><code>queryFields</code></td>
<td><code>object</code></td>
<td><code>no</code></td>
<td>Arbitrary query fields assigned to the granule</td>
</tr>
<tr>
<td><code>status</code></td>
<td><code>string</code></td>
<td><code>yes</code></td>
<td>Ingest status of the granule one of ['running', 'completed', 'failed']</td>
</tr>
<tr>
<td><code>timeToArchive</code></td>
<td><code>number</code></td>
<td><code>no</code></td>
<td>Time to post to CMR in seconds</td>
</tr>
<tr>
<td><code>timeToPreprocess</code></td>
<td><code>number</code></td>
<td><code>no</code></td>
<td>Time to sync granule in seconds</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>integer</code></td>
<td><code>no</code></td>
<td>Timestamp for granule record (now)</td>
</tr>
<tr>
<td><code>updatedAt</code></td>
<td><code>integer</code></td>
<td><code>no</code></td>
<td>Update Time for granule (now)</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="175"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/granules</div>
    </div>
<h4 id="example-request-18">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/granules \
  --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
    "granuleId": "granuleId.A20200113.006.1005",
  "collectionId": "alpha___006",
  "status": "running",
  "beginningDateTime": "1995-01-01T00:00:00.000Z",
  "cmrLink": "https://mmt.uat.earthdata.nasa.gov/collections/C1237256734-CUMULUS",
  "createdAt": 1631547286190,
  "duration": 60000,
  "endingDateTime": "2021-09-13T00:00:00.000Z",
  "error": {},
  "execution": "https://example.com/executions/arn:aws:states:us-east-1:123456789012:execution:TestStepFunction2:cff1266e-ef36-664f-ff00-3a4d26bd1735",
  "files": [
    {
      "bucket": "stack-protected",
      "key": "granuleId.A20200113.006.1005.hdf",
      "fileName": "granuleId.A20200113.006.1005.hdf"
    }
  ],
  "lastUpdateDateTime":"2021-09-12T15:10:01.000Z",
  "pdrName": "aPdrName",
  "processingEndDateTime": "2020-10-13T23:59:59.999Z",
  "processingStartDateTime": "2020-10-13T00:00:00.000Z",
  "productVolume": 59632353,
  "productionDateTime": "2020-10-14T15:40:05.546Z",
  "provider": "s3-local",
  "published": true,
  "queryFields": {"custom": "values can go here"},
  "timeToArchive": 5001,
  "timeToPreprocess": 3240,
  "timestamp":1631547675248,
  "updatedAt":1631547675248
  }'</span></pre>
<h4 id="example-response-16">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Successfully wrote granule with Granule Id: granuleId.A20200113.006.1005"</span>
}</pre>
</div></div><div data-title="Update or replace granule" class="keyline-top section contain clearfix " data-reactid="176"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="177"><h2 id="update-or-replace-granule">Update or replace granule</h2>
<p>Updates or creates an existing granule.</p>
<p>This endpoint functions with PATCH behavior in that missing fields are preserved
on update.</p>
<p>Undefined values that are not required by this API (e.g. <code>createdAt</code>) but are required by
the schema will be set to default values if unset and not already present in
case of granule update.</p>
<p><strong>Please note this endpoint will be being moved to the <code>PATCH</code> HTTP request
method in a future release</strong></p>
<p>Values with NULL set will be removed from the object, unless the field is not
nullable/removable in which case an error will be returned.  In some cases, a
default value will be set on deletion, according to the following table:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Nullable</th>
<th>Null Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beginningDateTime</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>cmrLink</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>collectionId</code></td>
<td><code>no</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>createdAt</code></td>
<td><code>yes</code></td>
<td>Current Date</td>
</tr>
<tr>
<td><code>duration</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>endingDateTime</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>error</code></td>
<td><code>yes</code></td>
<td>{}</td>
</tr>
<tr>
<td><code>execution</code></td>
<td><code>no</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>files</code></td>
<td><code>yes</code></td>
<td>'[]' - will remove all associated files, granule will return undefined</td>
</tr>
<tr>
<td><code>granuleId</code></td>
<td><code>no</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>lastUpdateDateTime</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>pdrName</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>processingEndDateTime</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>processingStartDateTime</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>productVolume</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>productionDateTime</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>provider</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>published</code></td>
<td><code>yes</code></td>
<td>false</td>
</tr>
<tr>
<td><code>queryFields</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>status</code></td>
<td><code>no</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>timeToArchive</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>timeToPreprocess</code></td>
<td><code>yes</code></td>
<td>Value will be removed</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>yes</code></td>
<td>Current time value</td>
</tr>
<tr>
<td><code>updatedAt</code></td>
<td><code>no</code></td>
<td>Value will be removed</td>
</tr>
</tbody>
</table>
<p> The same fields are available as are for <a href="#create-granule">creating a
granule.</a>.</p>
<p>Returns status 200 on successful replacement, 404 if the <code>granuleId</code> can not be
found in the database, or 400 when the granuleId in the payload does not match the
corresponding value in the resource URI.</p>
<p><strong>Please note that a granule's <code>collectionId</code> is not modifiable.</strong></p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="178"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PATCH</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleId}</span></div>
    </div>
<h4 id="example-request-19">Example request</h4>
<pre class='hljs'>$ curl --request PATCH https://example.com/granules/granuleId.A19990103.006.1000 \
  --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
  "granuleId": "granuleId.A20200113.006.1005",
  "files": [
    {
      "bucket": "stack-protected",
      "key": "granuleId.A20200113.006.1005.hdf",
      "fileName": "granuleId.A20200113.006.1005.hdf"
    },
    {
      "bucket": "stack-protected",
      "key": "granuleId.A20200113.006.1005.jpg",
      "fileName": "granuleId.A20200113.006.1005.jpg"
    }
  ],
  "duration": 1000,
  "status": "completed"
  }'</span></pre>
<h4 id="example-response-17">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Successfully updated granule with Granule Id: granuleId.A20200113.006.1005"</span>
}</pre>
</div></div><div data-title="Associate execution" class="keyline-top section contain clearfix " data-reactid="179"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="180"><h2 id="associate-execution">Associate execution</h2>
<p>Associate an execution with a granule. Returns status 200 on successful
association, 404 if the granule or execution can not be found in the database,
or 400 when the granuleId in the payload does not match the corresponding
value in the resource URI.</p>
<p>The request should have the following fields.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collectionId</code></td>
<td><code>string</code></td>
<td>Collection associated with the granule (e.g. <code>&#x3C;name>___&#x3C;version></code> where <code>&#x3C;name></code> is the collection name and <code>&#x3C;version></code> is the collection version)</td>
</tr>
<tr>
<td><code>granuleId</code></td>
<td><code>string</code></td>
<td>Granule ID</td>
</tr>
<tr>
<td><code>executionArn</code></td>
<td><code>string</code></td>
<td>Execution arn</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="181"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleId}</span>/executions</div>
    </div>
<h4 id="example-request-20">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/granules/granuleId.A19990103.006.1000/executions \
  --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
  "granuleId": "granuleId.A19990103.006.1000",
  "collectionId": "MOD09GQ___006",
  "executionArn": "arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735"
  }'</span></pre>
<h4 id="example-response-18">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Successfully associated execution arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735 with granule granuleId granuleId.A19990103.006.1000 collectionId MOD09GQ___006"</span>
}</pre>
</div></div><div data-title="Reingest granule" class="keyline-top section contain clearfix " data-reactid="182"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="183"><h2 id="reingest-granule">Reingest granule</h2>
<p>Reingest a granule. This causes the granule to re-download to Cumulus from
source, and begin processing from scratch.  Reingesting a granule will
overwrite existing granule files.</p>
<p>You trigger the reingest by posting with the data's <code>action</code> set to <code>reingest</code>.</p>
<p>A reingest request may also include one optional parameters, either
<code>executionArn</code> or <code>workflowName</code>.  Use of one of these will cause the reingest
occur, but before running the ingest, a different original payload is found
from existing executions and used in place of the most recent execution.  This
has the result of allowing you to reingest a granule with any of it's previous
inputs.  If <code>executionArn</code> is specified, the originalMessage is pulled directly
from that execution.  When <code>workflowName</code> is specified, the database is search
to find all of the executions with that workflowName that were run on the
granuleid, and the most recent originalMessage is pulled and used for the
reingest.  Remember only to supply either <code>executionArn</code> or <code>workflowName</code>, if
both are present, workflowName is ignored and executionArn is used to determining
the input message to the reingest.</p>
<p>A warning message is included in the response if the collection's
duplicateHandling is not set to 'replace'.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="184"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PATCH</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleId}</span></div>
    </div>
<h4 id="example-request-21">Example request</h4>
<pre class='hljs'>$ curl --request PATCH https://example.com/granules/MOD11A1.A2017137.h20v17.006.2017138085755
       --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span>
       --header <span class="hljs-string">'Content-Type: application/json'</span>
       --data <span class="hljs-string">'{"action": "reingest",
               ["executionArn": "arn:aws:states:us-east-1:123456789012:execution:stack-lambdaName:9da47a3b-4d85-4599-ae78-dbec2e042520"],
               ["workflowName": "TheWorkflowName"] }'</span></pre>
<h4 id="example-response-19">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755"</span>,
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"reingest"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>,
    <span class="hljs-attr">"warning"</span>: <span class="hljs-string">"The granule files may be overwritten"</span>
}</pre>
</div></div><div data-title="Apply workflow to granule" class="keyline-top section contain clearfix " data-reactid="185"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="186"><h2 id="apply-workflow-to-granule">Apply workflow to granule</h2>
<p>Apply the named workflow to the granule. Workflow input will be built from template and provided entire Cumulus granule record as payload.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="187"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PATCH</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleid}</span></div>
    </div>
<h4 id="example-request-22">Example request</h4>
<pre class='hljs'>$ curl --request PATCH https://example.com/granules/MOD11A1.A2017137.h19v16.006.2017138085750 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{ "action": "applyWorkflow", "workflow": "inPlaceWorkflow" }'</span></pre>
<h4 id="example-response-20">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD11A1.A2017137.h20v17.006.2017138085755"</span>,
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"applyWorkflow inPlaceWorkflow"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>
}</pre>
</div></div><div data-title="Move a granule" class="keyline-top section contain clearfix " data-reactid="188"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="189"><h2 id="move-a-granule">Move a granule</h2>
<p>Move a granule from one location on S3 to another. Individual files are moved to specific locations by using a regex that matches their filenames.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="190"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PATCH</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleId}</span></div>
    </div>
<h4 id="example-request-23">Example request</h4>
<pre class='hljs'>$ curl --request PATCH https://example.com/granules/MOD11A1.A2017137.h19v16.006.2017138085750 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{ "action": "move", "destinations": [{ "regex": ".*.hdf$", "bucket": "s3-bucket", "filepath": "new/filepath/" }]}'</span></pre>
<h4 id="example-response-21">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD11A1.A2017137.h19v16.006.2017138085750"</span>,
  <span class="hljs-attr">"action"</span>: <span class="hljs-string">"move"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>
}</pre>
</div></div><div data-title="Remove granule from CMR" class="keyline-top section contain clearfix " data-reactid="191"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="192"><h2 id="remove-granule-from-cmr">Remove granule from CMR</h2>
<p>Remove a Cumulus granule from CMR.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="193"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PATCH</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleId}</span></div>
    </div>
<h4 id="example-request-24">Example request</h4>
<pre class='hljs'>$ curl --request PATCH https://example.com/granules/MOD11A1.A2017137.h19v16.006.2017138085750 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{"action": "removeFromCmr"}'</span></pre>
<h4 id="example-response-22">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD11A1.A2017137.h19v16.006.2017138085750"</span>,
    <span class="hljs-attr">"action"</span>: <span class="hljs-string">"removeFromCmr"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>
}</pre>
</div></div><div data-title="Delete granule" class="keyline-top section contain clearfix " data-reactid="194"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="195"><h2 id="delete-granule">Delete granule</h2>
<p>Delete a granule from Cumulus. It must <em>already</em> be removed from CMR.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="196"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/granules/<span class="strong">{granuleId}</span></div>
    </div>
<h4 id="example-request-25">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/granules/1A0000-2016121001_002_001 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-23">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"detail"</span>: <span class="hljs-string">"Record deleted"</span>
}</pre>
</div></div><div data-title="Bulk Operations" class="keyline-top section contain clearfix " data-reactid="197"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="198"><h2 id="bulk-operations">Bulk Operations</h2>
<p>Apply a workflow to the granules provided. Granules can be sent as a list of IDs or as an Elasticsearch query to the Metrics' Elasticsearch.</p>
<p>Overview of the request fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>workflow</code></td>
<td><code>Y</code></td>
<td><code>string</code></td>
<td>Workflow to be applied to all granules</td>
</tr>
<tr>
<td><code>ids</code></td>
<td><code>yes</code> - if <code>query</code> not present</td>
<td><code>Array&#x3C;string></code></td>
<td>List of IDs to process. Required if there is no Elasticsearch query provided</td>
</tr>
<tr>
<td><code>query</code></td>
<td><code>yes</code> - if <code>ids</code> not present</td>
<td><code>Object</code></td>
<td>Query to Elasticsearch to determine which Granules to go through given workflow. Required if no IDs are given.</td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>yes</code> - if <code>query</code> is present</td>
<td><code>string</code></td>
<td>Elasticsearch index to search with the given query</td>
</tr>
<tr>
<td><code>knexDebug</code></td>
<td><code>N</code></td>
<td><code>bool</code></td>
<td>Sets knex PostgreSQL connection pool/query debug output.  Defaults to false</td>
</tr>
<tr>
<td><code>queueUrl</code></td>
<td><code>N</code></td>
<td><code>string</code></td>
<td>URL of SQS queue to use for scheduling granule workflows (e.g. <code>https://sqs.us-east-1.amazonaws.com/12345/queue-name</code>)</td>
</tr>
</tbody>
</table>
<p>Use the <a href="#retrieve-async-operation">Retrieve async operation</a> endpoint with the <code>id</code> in the response to determine the status of the async operation.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="199"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/granules/bulk</div>
    </div>
<h4 id="example-request-with-elasticsearch-query-generated-by-kibana">Example request with Elasticsearch query generated by Kibana:</h4>
<pre class='hljs'>$ curl --request POST \
    https://example.com/granules/bulk --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
        "workflowName": "HelloWorldWorkflow",
        "index": "index-in-es",
        "query": {
            "size": 500,
            "query": {
                "filter": [
                    {
                        "bool": {
                            "filter": [
                                {
                                    "bool": {
                                        "should": [{"match": {"granuleId": "MOD09GQ.A2016358.h13v04.006.2016360104606"}}],
                                        "minimum_should_match": 1
                                    }
                                },
                                {
                                    "bool": {
                                        "should": [{"match": {"status": "FAILED"}}],
                                        "minimum_should_match": 1
                                    }
                                }
                            ]
                        }
                    }
                ],
                "should": [],
                "must_not": []
            }
        }
    }'</span></pre>
<h4 id="example-request-with-given-granule-ids">Example request with given Granule IDs:</h4>
<pre class='hljs'>curl -X POST
  https://example.com/granules/bulk --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{"ids": ["MOD09GQ.A2016358.h13v04.006.2016360104606"], "workflowName": "HelloWorldWorkflow"}'</span></pre>
<h4 id="example-response-24">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"0eb8e809-8790-5409-1239-bcd9e8d28b8e"</span>
}</pre>
</div></div><div data-title="Bulk Delete" class="keyline-top section contain clearfix " data-reactid="200"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="201"><h2 id="bulk-delete">Bulk Delete</h2>
<p>Bulk delete the provided granules. Granules can be sent as a list of IDs or as an Elasticsearch query to the Metrics' Elasticsearch.</p>
<p>Overview of the request fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ids</code></td>
<td><code>yes</code> - if <code>query</code> not present</td>
<td><code>Array&#x3C;string></code></td>
<td>List of IDs to process. Required if there is no Elasticsearch query provided</td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>yes</code> - if <code>query</code> is present</td>
<td><code>string</code></td>
<td>Elasticsearch index to search with the given query</td>
</tr>
<tr>
<td><code>query</code></td>
<td><code>yes</code> - if <code>ids</code> not present</td>
<td><code>Object</code></td>
<td>Query to Elasticsearch to determine which Granules to delete. Required if no IDs are given</td>
</tr>
<tr>
<td><code>concurrency</code></td>
<td><code>N</code></td>
<td><code>integer</code></td>
<td>Sets the granule concurrency for the bulk deletion operation.  Defaults to <code>10</code></td>
</tr>
<tr>
<td><code>forceRemoveFromCmr</code></td>
<td><code>N</code></td>
<td><code>bool</code></td>
<td>Whether to remove published granules from CMR before deletion. <strong>You must set this value to <code>true</code> to do bulk deletion of published granules, otherwise deleting them will fail.</strong></td>
</tr>
<tr>
<td><code>knexDebug</code></td>
<td><code>N</code></td>
<td><code>bool</code></td>
<td>Sets knex PostgreSQL connection pool/query debug output.  Defaults to false</td>
</tr>
<tr>
<td><code>maxDbConnections</code></td>
<td><code>N</code></td>
<td><code>integer</code></td>
<td>Sets the maximum database connections to allocate for the operation.  Defaults to <code>concurrency</code> value</td>
</tr>
</tbody>
</table>
<p>Use the <a href="#retrieve-async-operation">Retrieve async operation</a> endpoint with the <code>id</code> in the response to determine the status of the async operation.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="202"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/granules/bulkDelete</div>
    </div>
<h4 id="example-request-with-elasticsearch-query-generated-by-kibana-1">Example request with Elasticsearch query generated by Kibana:</h4>
<pre class='hljs'>$ curl --request POST \
    https://example.com/granules/bulkDelete --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
        "forceRemoveFromCmr": true,
        "index": "index-in-es",
        "query": {
            "size": 500,
            "query": {
                "filter": [
                    {
                        "bool": {
                            "filter": [
                                {
                                    "bool": {
                                        "should": [{"match": {"granuleId": "MOD09GQ.A2016358.h13v04.006.2016360104606"}}],
                                        "minimum_should_match": 1
                                    }
                                },
                                {
                                    "bool": {
                                        "should": [{"match": {"status": "FAILED"}}],
                                        "minimum_should_match": 1
                                    }
                                }
                            ]
                        }
                    }
                ],
                "should": [],
                "must_not": []
            }
        }
    }'</span></pre>
<h4 id="example-request-with-given-granule-ids-1">Example request with given Granule IDs:</h4>
<pre class='hljs'>curl -X POST
  https://example.com/granules/bulkDelete --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --data <span class="hljs-string">'{"ids": ["MOD09GQ.A2016358.h13v04.006.2016360104606"], "forceRemoveFromCmr": true}'</span></pre>
<h4 id="example-response-25">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"0eb8e809-8790-5409-1239-bcd9e8d28b8e"</span>
}</pre>
</div></div><div data-title="Bulk Reingest" class="keyline-top section contain clearfix " data-reactid="203"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="204"><h2 id="bulk-reingest">Bulk Reingest</h2>
<p>Reingest the granules provided. Granules can be sent as a list of IDs or as an Elasticsearch query to the Metrics' Elasticsearch.</p>
<p>Overview of the request fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ids</code></td>
<td><code>yes</code> - if <code>query</code> not present</td>
<td><code>Array&#x3C;string></code></td>
<td>List of IDs to process. Required if there is no Elasticsearch query provided</td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>yes</code> - if <code>query</code> is present</td>
<td><code>string</code></td>
<td>Elasticsearch index to search with the given query</td>
</tr>
<tr>
<td><code>query</code></td>
<td><code>yes</code> - if <code>ids</code> not present</td>
<td><code>Object</code></td>
<td>Query to Elasticsearch to determine which Granules to be reingested. Required if no IDs are given.</td>
</tr>
<tr>
<td><code>knexDebug</code></td>
<td><code>N</code></td>
<td><code>bool</code></td>
<td>Sets knex postgreSQL connection pool/query debug output.  Defaults to false</td>
</tr>
<tr>
<td><code>workflowName</code></td>
<td><code>no</code></td>
<td><code>string</code></td>
<td>optional workflow name that allows different workflow and initial input to be used during reingest. See below.</td>
</tr>
</tbody>
</table>
<p>An optional data parameter of <code>workflowName</code> is also available to allow you to override the input message to the reingest. If <code>workflowName</code> is specified, the original message is pulled directly
by finding the most recent execution of the workflowName associated with the granuleId.</p>
<p>Use the <a href="#retrieve-async-operation">Retrieve async operation</a> endpoint with the <code>id</code> in the response to determine the status of the async operation.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="205"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/granules/bulkReingest</div>
    </div>
<h4 id="example-request-with-elasticsearch-query-generated-by-kibana-2">Example request with Elasticsearch query generated by Kibana:</h4>
<pre class='hljs'>$ curl --request POST \
    https://example.com/granules/bulkReingest --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
        "index": "index-in-es",
        "query": {
            "size": 500,
            "query": {
                "filter": [
                    {
                        "bool": {
                            "filter": [
                                {
                                    "bool": {
                                        "should": [{"match": {"granuleId": "MOD09GQ.A2016358.h13v04.006.2016360104606"}}],
                                        "minimum_should_match": 1
                                    }
                                },
                                {
                                    "bool": {
                                        "should": [{"match": {"status": "FAILED"}}],
                                        "minimum_should_match": 1
                                    }
                                }
                            ]
                        }
                    }
                ],
                "should": [],
                "must_not": []
            }
        }
    }'</span></pre>
<h4 id="example-request-with-given-granule-ids-and-optional-workflow-parameter">Example request with given Granule IDs and optional workflow parameter:</h4>
<pre class='hljs'>curl -X POST
  https://example.com/granules/bulkReingest
  --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span>
  --data <span class="hljs-string">'{
        "ids": ["MOD09GQ.A2016358.h13v04.006.2016360104606"],
        "workflow": "workflowName",
        }'</span></pre>
<h4 id="example-response-26">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"0eb8e809-8790-5409-1239-bcd9e8d28b8e"</span>
}</pre>
</div></div><div data-title="List PDRs" class="keyline-top section contain clearfix " data-reactid="206"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="207"><h2 id="list-pdrs">List PDRs</h2>
<p>List PDRs in the Cumulus system.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="208"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/pdrs</div>
    </div>
<h4 id="example-request-26">Example request</h4>
<pre class='hljs'>$ curl https://example.com/pdrs --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-27">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"pdr"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">8</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"pdrName"</span>: <span class="hljs-string">"7970bff5-128a-489f-b43c-de4ad7834ce5.PDR"</span>,
            <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD11A1___006"</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"failed"</span>,
            <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"LP_TS2_DataPool"</span>,
            <span class="hljs-attr">"progress"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:ACCOUNT:execution:LpdaacCumulusIngestGranuleStateMachine-N3CLGBXRPAT9:6ef0c52f83c549db58b3a1e50"</span>,
            <span class="hljs-attr">"PANSent"</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">"PANmessage"</span>: <span class="hljs-string">"N/A"</span>,
            <span class="hljs-attr">"stats"</span>: {
                <span class="hljs-attr">"processing"</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">"completed"</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">"failed"</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">"total"</span>: <span class="hljs-number">0</span>
            },
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1514305411204</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1514305424036</span>,
            <span class="hljs-attr">"duration"</span>: <span class="hljs-number">12.832</span>
        }
    ]
}</pre>
</div></div><div data-title="Retrieve PDR" class="keyline-top section contain clearfix " data-reactid="209"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="210"><h2 id="retrieve-pdr">Retrieve PDR</h2>
<p>Retrieve a single PDR.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="211"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/pdrs/<span class="strong">{pdrName}</span></div>
    </div>
<h4 id="example-request-27">Example request</h4>
<pre class='hljs'>$ curl https://example.com/pdrs/7970bff5-128a-489f-b43c-de4ad7834ce5.PDR --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-28">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"pdrName"</span>: <span class="hljs-string">"7970bff5-128a-489f-b43c-de4ad7834ce5.PDR"</span>,
    <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD11A1___006"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"failed"</span>,
    <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"LP_TS2_DataPool"</span>,
    <span class="hljs-attr">"progress"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:ACCOUNT:execution:LpdaacCumulusIngestGranuleStateMachine-N3CLGBXRPAT9:6ef0c52f83c549db58b3a1e50"</span>,
    <span class="hljs-attr">"PANSent"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"PANmessage"</span>: <span class="hljs-string">"N/A"</span>,
    <span class="hljs-attr">"stats"</span>: {
        <span class="hljs-attr">"processing"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"completed"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"failed"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"total"</span>: <span class="hljs-number">0</span>
    },
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1514305411204</span>,
    <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1514305424036</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-number">12.832</span>,
    <span class="hljs-attr">"_id"</span>: <span class="hljs-string">"7970bff5-128a-489f-b43c-de4ad7834ce5.PDR"</span>
}</pre>
</div></div><div data-title="Delete PDR" class="keyline-top section contain clearfix " data-reactid="212"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="213"><h2 id="delete-pdr">Delete PDR</h2>
<p>Delete a PDR from Cumulus. Its granules will remain, and the PDR may be re-discovered and re-ingested/re-processed from scratch in the future.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="214"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/pdrs/<span class="strong">{pdrName}</span></div>
    </div>
<h4 id="example-request-28">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/pdrs/good_25grans.PDR --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-29">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record deleted"</span>
}</pre>
</div></div><div data-title="List rules" class="keyline-top section contain clearfix " data-reactid="215"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="216"><h2 id="list-rules">List rules</h2>
<p>List rules in the Cumulus system.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="217"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/rules</div>
    </div>
<h4 id="example-request-29">Example request</h4>
<pre class='hljs'>$ curl https://example.com/rules --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-30">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"rule"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">7</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"repeat"</span>,
            <span class="hljs-attr">"workflow"</span>: <span class="hljs-string">"DiscoverPdrs"</span>,
            <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"local"</span>,
            <span class="hljs-attr">"collection"</span>: {
                <span class="hljs-attr">"name"</span>: <span class="hljs-string">"AST_L1A"</span>,
                <span class="hljs-attr">"version"</span>: <span class="hljs-string">"003"</span>
            },
            <span class="hljs-attr">"rule"</span>: {
                <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scheduled"</span>,
                <span class="hljs-attr">"value"</span>: <span class="hljs-string">"rate(5 minutes)"</span>
            },
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1511232462534</span>,
            <span class="hljs-attr">"state"</span>: <span class="hljs-string">"DISABLED"</span>
        }
    ]
}</pre>
</div></div><div data-title="Retrieve rule" class="keyline-top section contain clearfix " data-reactid="218"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="219"><h2 id="retrieve-rule">Retrieve rule</h2>
<p>Retrieve a single rule.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="220"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/rules/<span class="strong">{name}</span></div>
    </div>
<h4 id="example-request-30">Example request</h4>
<pre class='hljs'>$ curl https://example.com/rules/repeat --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-31">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"workflow"</span>: <span class="hljs-string">"DiscoverPdrs"</span>,
    <span class="hljs-attr">"collection"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"AST_L1A"</span>,
        <span class="hljs-attr">"version"</span>: <span class="hljs-string">"003"</span>
    },
    <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1511232462507</span>,
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1510903518741</span>,
    <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"local"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"repeat"</span>,
    <span class="hljs-attr">"rule"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scheduled"</span>,
        <span class="hljs-attr">"value"</span>: <span class="hljs-string">"rate(5 minutes)"</span>
    },
    <span class="hljs-attr">"state"</span>: <span class="hljs-string">"DISABLED"</span>
}</pre>
</div></div><div data-title="Create rule" class="keyline-top section contain clearfix " data-reactid="221"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="222"><h2 id="create-rule">Create rule</h2>
<p>Create a rule. For more information on creating rules and the contents of a request see <a href="https://nasa.github.io/cumulus/docs/data-cookbooks/setup#rules">the Cumulus setup documentation</a>.</p>
<p>Overview of the schema fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>rule name (letters, numbers, underscores only)</td>
</tr>
<tr>
<td><code>state</code></td>
<td><code>"DISABLED"</code>|<code>"ENABLED"</code></td>
<td>rule state (default: ENABLED)</td>
</tr>
<tr>
<td><code>workflow</code></td>
<td><code>string</code></td>
<td>name of workflow started by the rule</td>
</tr>
<tr>
<td><code>rule</code></td>
<td><code>Object</code></td>
<td>rule object</td>
</tr>
<tr>
<td><code>-- rule.type</code></td>
<td><code>"onetime"</code>|<code>"scheduled"</code>|<code>"kinesis"</code>|<code>"sns"</code>|<code>"sqs"</code></td>
<td>rule trigger type</td>
</tr>
<tr>
<td><code>-- rule.value</code></td>
<td><code>onetime</code>: N/A<br><code>scheduled</code>: cron-type or rate expression<br><code>kinesis</code>: Kinesis stream ARN<br><code>sns</code>: SNS topic ARN<br><code>sqs</code>: SQS queue URL</td>
<td>required value differs by type</td>
</tr>
<tr>
<td><code>-- rule.arn</code></td>
<td><code>string</code></td>
<td><code>kinesis</code> scheduled event arn</td>
</tr>
<tr>
<td><code>-- rule.logEventArn</code></td>
<td><code>string</code></td>
<td><code>kinesis</code> scheduled log event arn</td>
</tr>
<tr>
<td><code>provider</code></td>
<td><code>string</code></td>
<td>provider record provided to workflow (optional)</td>
</tr>
<tr>
<td><code>collection</code></td>
<td><code>Object</code></td>
<td>collection record provided to workflow (optional)</td>
</tr>
<tr>
<td><code>-- collection.name</code></td>
<td><code>string</code></td>
<td>collection name</td>
</tr>
<tr>
<td><code>-- collection.version</code></td>
<td><code>string</code></td>
<td>collection version</td>
</tr>
<tr>
<td><code>meta</code></td>
<td><code>Object</code></td>
<td>contents to add to workflow input's <code>meta</code> field</td>
</tr>
<tr>
<td><code>tags</code></td>
<td><code>array</code></td>
<td>Optional tags (for search)</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="223"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/rules</div>
    </div>
<h4 id="example-request-31">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/rules --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
    "workflow": "DiscoverPdrs",
    "collection": {
        "name": "AST_L1A",
        "version": "003"
    },
    "provider": "local",
    "name": "repeat_test",
    "rule": {
        "type": "scheduled",
        "value": "rate(5 minutes)"
    },
    "meta": { "publish": false },
    "state": "DISABLED"
}'</span></pre>
<h4 id="example-response-32">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record saved"</span>,
    <span class="hljs-attr">"record"</span>: {
        <span class="hljs-attr">"workflow"</span>: <span class="hljs-string">"DiscoverPdrs"</span>,
        <span class="hljs-attr">"collection"</span>: {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"AST_L1A"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"003"</span>
        },
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1510903518741</span>,
        <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"local"</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"repeat_test"</span>,
        <span class="hljs-attr">"rule"</span>: {
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scheduled"</span>,
            <span class="hljs-attr">"value"</span>: <span class="hljs-string">"rate(5 minutes)"</span>
        },
        <span class="hljs-attr">"meta"</span>: { <span class="hljs-attr">"publish"</span>: <span class="hljs-literal">false</span> },
        <span class="hljs-attr">"state"</span>: <span class="hljs-string">"DISABLED"</span>,
    }
}</pre>
</div></div><div data-title="Update/replace rule" class="keyline-top section contain clearfix " data-reactid="224"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="225"><h2 id="updatereplace-rule">Update/replace rule</h2>
<p>Update/replace an existing rule. Expects payload to specify the entire
rule object, and will completely replace the existing rule with the
specified payload. For a field reference see <a href="#create-rule">"Create rule"</a>.</p>
<p>Returns status 200 on successful replacement, 400 if the <code>name</code> property in the
payload does not match the corresponding value in the resource URI, or 404 if
there is no rule with the specified name.</p>
<p>Special case:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>action</code></td>
<td><code>"rerun"</code></td>
<td>rerun rule (<code>onetime</code> rule only)</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="226"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PUT</div>
      <div class='pad0 code small endpoint-url'>/rules/<span class="strong">{name}</span></div>
    </div>
<h4 id="example-request-32">Example request</h4>
<pre class='hljs'>$ curl --request PUT https://example.com/rules/repeat_test --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
  "name": "repeat_test",
  "workflow": "DiscoverPdrs",
  "collection": {
    "name": "AST_L1A",
    "version": "003"
  },
  "provider": "local",
  "rule": {
    "type": "scheduled",
    "value": "rate(5 minutes)"
  },
  "state": "ENABLED"
}'</span></pre>
<h4 id="example-successful-response-2">Example successful response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"repeat_test"</span>,
  <span class="hljs-attr">"workflow"</span>: <span class="hljs-string">"DiscoverPdrs"</span>,
  <span class="hljs-attr">"collection"</span>: {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"AST_L1A"</span>,
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"003"</span>
  },
  <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1521755265130</span>,
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1510903518741</span>,
  <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"local"</span>,
  <span class="hljs-attr">"rule"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scheduled"</span>,
    <span class="hljs-attr">"value"</span>: <span class="hljs-string">"rate(5 minutes)"</span>
  },
  <span class="hljs-attr">"state"</span>: <span class="hljs-string">"ENABLED"</span>
}</pre>
<h4 id="rerun-request-onetime-rule-special-case">Rerun request (<code>onetime</code>-rule special case)</h4>
<pre class='hljs'>$ curl --request PUT https://example.com/rules/my_onetime_rule --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{"action": "rerun"}'</span></pre>
</div></div><div data-title="Delete rule" class="keyline-top section contain clearfix " data-reactid="227"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="228"><h2 id="delete-rule">Delete rule</h2>
<p>Delete a rule from Cumulus.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="229"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/rules/<span class="strong">{name}</span></div>
    </div>
<h4 id="example-request-33">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/rules/repeat_test --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-33">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record deleted"</span>
}</pre>
</div></div><div data-title="Summary" class="keyline-top section contain clearfix " data-reactid="230"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="231"><h2 id="summary">Summary</h2>
<p>Retrieve a summary of statistics around the granules in the system. The <code>collections</code> returned are the number of distinct collections for the granules active during the given time period, defaulted to the last day if none is specified.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="232"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/stats</div>
    </div>
<h4 id="example-request-34">Example Request</h4>
<pre class='hljs'>$ curl https://example.com/stats --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-success-response">Example success response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"errors"</span>: {
        <span class="hljs-attr">"dateFrom"</span>: <span class="hljs-string">"1970-01-18T12:36:59+00:00"</span>,
        <span class="hljs-attr">"dateTo"</span>: <span class="hljs-string">"2017-12-26T04:38:15+00:00"</span>,
        <span class="hljs-attr">"value"</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">"aggregation"</span>: <span class="hljs-string">"count"</span>,
        <span class="hljs-attr">"unit"</span>: <span class="hljs-string">"error"</span>
    },
    <span class="hljs-attr">"collections"</span>: {
        <span class="hljs-attr">"dateFrom"</span>: <span class="hljs-string">"1970-01-01T12:00:00+00:00"</span>,
        <span class="hljs-attr">"dateTo"</span>: <span class="hljs-string">"2017-12-26T04:38:15+00:00"</span>,
        <span class="hljs-attr">"value"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">"aggregation"</span>: <span class="hljs-string">"count"</span>,
        <span class="hljs-attr">"unit"</span>: <span class="hljs-string">"collection"</span>
    },
    <span class="hljs-attr">"processingTime"</span>: {
        <span class="hljs-attr">"dateFrom"</span>: <span class="hljs-string">"1970-01-18T12:36:59+00:00"</span>,
        <span class="hljs-attr">"dateTo"</span>: <span class="hljs-string">"2017-12-26T04:38:15+00:00"</span>,
        <span class="hljs-attr">"value"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">"aggregation"</span>: <span class="hljs-string">"average"</span>,
        <span class="hljs-attr">"unit"</span>: <span class="hljs-string">"second"</span>
    },
    <span class="hljs-attr">"granules"</span>: {
        <span class="hljs-attr">"dateFrom"</span>: <span class="hljs-string">"1970-01-18T12:36:59+00:00"</span>,
        <span class="hljs-attr">"dateTo"</span>: <span class="hljs-string">"2017-12-26T04:38:15+00:00"</span>,
        <span class="hljs-attr">"value"</span>: <span class="hljs-number">8</span>,
        <span class="hljs-attr">"aggregation"</span>: <span class="hljs-string">"count"</span>,
        <span class="hljs-attr">"unit"</span>: <span class="hljs-string">"granule"</span>
    }
}</pre>
</div></div><div data-title="Count" class="keyline-top section contain clearfix " data-reactid="233"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="234"><h2 id="count">Count</h2>
<p>Count the value frequencies for a given field, for a given type of record in Cumulus. Requires the following query parameters, and may include the regular filter parameters:</p>
<table>
<thead>
<tr>
<th>query string parameter</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type={providers|collections|granules|pdrs|logs}</code></td>
<td>type of Cumulus record to query</td>
</tr>
<tr>
<td><code>field={fieldName}</code></td>
<td>which field to count frequencies for; no default</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="235"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/stats/aggregate</div>
    </div>
<h4 id="example-request-35">Example request</h4>
<pre class='hljs'>curl <span class="hljs-string">'https://example.com/stats/aggregate?field=status&amp;type=pdrs'</span> --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-34">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"meta"</span>: {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
    <span class="hljs-attr">"count"</span>: <span class="hljs-number">52</span>,
    <span class="hljs-attr">"field"</span>: <span class="hljs-string">"status.keyword"</span>
  },
  <span class="hljs-attr">"count"</span>: [
    {
      <span class="hljs-attr">"key"</span>: <span class="hljs-string">"failed"</span>,
      <span class="hljs-attr">"count"</span>: <span class="hljs-number">43</span>
    },
    {
      <span class="hljs-attr">"key"</span>: <span class="hljs-string">"completed"</span>,
      <span class="hljs-attr">"count"</span>: <span class="hljs-number">5</span>
    },
    {
      <span class="hljs-attr">"key"</span>: <span class="hljs-string">"parsed"</span>,
      <span class="hljs-attr">"count"</span>: <span class="hljs-number">3</span>
    }
  ]
}</pre>
</div></div><div data-title="List logs" class="keyline-top section contain clearfix " data-reactid="236"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="237"><h2 id="list-logs">List logs</h2>
<p><strong>Note:</strong> This endpoint will only work if logs are being delivered to the Metrics system. Otherwise it will
return a 400 Error.</p>
<p>List processing logs from the Cumulus engine. A log's <code>level</code> field should be specified by their string value and be one of:</p>
<ul>
<li>fatal (60)</li>
<li>error (50)</li>
<li>warn (40)</li>
<li>info (30)</li>
<li>debug (20)</li>
<li>trace (10)</li>
</ul>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="238"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/logs</div>
    </div>
<h4 id="example-request-36">Example request</h4>
<pre class='hljs'>$ curl https://example.com/logs?<span class="hljs-built_in">limit</span>=5 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-35">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"logs"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">5</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">750</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"pid"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"hostname"</span>: <span class="hljs-string">"ip-10-29-4-186"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus"</span>,
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-attr">"msg"</span>: <span class="hljs-string">"https://ba008ffc.ngrok.io/ not found"</span>,
            <span class="hljs-attr">"file"</span>: <span class="hljs-string">"discover-pdrs/index.js"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Error"</span>,
            <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"HostNotFound: https://ba008ffc.ngrok.io/ not found\n    at discover.discover.then.catch.e (/var/task/index.js:9006:22)\n    at process._tickDomainCallback (internal/process/next_tick.js:135:7)"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"https://ba008ffc.ngrok.io/ not found"</span>,
            <span class="hljs-attr">"v"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513881407867</span>
        },
        {
            <span class="hljs-attr">"pid"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"hostname"</span>: <span class="hljs-string">"ip-10-29-4-186"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus"</span>,
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-attr">"file"</span>: <span class="hljs-string">"discover-pdrs/index.js"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Received a 404 error from undefined. Check your endpoint!"</span>,
            <span class="hljs-attr">"details"</span>: {
                <span class="hljs-attr">"host"</span>: <span class="hljs-string">"ba008ffc.ngrok.io"</span>,
                <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/"</span>,
                <span class="hljs-attr">"port"</span>: <span class="hljs-string">""</span>,
                <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"https"</span>,
                <span class="hljs-attr">"uriPath"</span>: <span class="hljs-string">"/"</span>,
                <span class="hljs-attr">"url"</span>: <span class="hljs-string">"https://ba008ffc.ngrok.io/"</span>,
                <span class="hljs-attr">"depth"</span>: <span class="hljs-number">1</span>,
                <span class="hljs-attr">"fetched"</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">"status"</span>: <span class="hljs-string">"notfound"</span>,
                <span class="hljs-attr">"stateData"</span>: {
                    <span class="hljs-attr">"requestLatency"</span>: <span class="hljs-number">66</span>,
                    <span class="hljs-attr">"requestTime"</span>: <span class="hljs-number">66</span>,
                    <span class="hljs-attr">"contentLength"</span>: <span class="hljs-number">34</span>,
                    <span class="hljs-attr">"contentType"</span>: <span class="hljs-string">"text/plain"</span>,
                    <span class="hljs-attr">"code"</span>: <span class="hljs-number">404</span>,
                    <span class="hljs-attr">"headers"</span>: {
                        <span class="hljs-attr">"content-length"</span>: <span class="hljs-string">"34"</span>,
                        <span class="hljs-attr">"connection"</span>: <span class="hljs-string">"close"</span>,
                        <span class="hljs-attr">"content-type"</span>: <span class="hljs-string">"text/plain"</span>
                    }
                },
                <span class="hljs-attr">"id"</span>: <span class="hljs-number">0</span>
            },
            <span class="hljs-attr">"v"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513881407867</span>
        },
        {
            <span class="hljs-attr">"pid"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"hostname"</span>: <span class="hljs-string">"ip-10-29-4-186"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus"</span>,
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-attr">"msg"</span>: <span class="hljs-string">"Cannot read property 'provider_path' of undefined"</span>,
            <span class="hljs-attr">"file"</span>: <span class="hljs-string">"discover-pdrs/index.js"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Error"</span>,
            <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"TypeError: Cannot read property 'provider_path' of undefined\n    at HttpDiscover.Discover (/var/task/index.js:10098:33)\n    at HttpDiscover._class (/var/task/index.js:96368:255)\n    at new HttpDiscover (/var/task/index.js:10342:241)\n    at handler (/var/task/index.js:8968:23)\n    at Promise (/var/task/cumulus-sled/index.js:82:5)\n    at invokeHandler (/var/task/cumulus-sled/index.js:72:10)\n    at then.then.then (/var/task/cumulus-sled/index.js:112:14)\n    at process._tickDomainCallback (internal/process/next_tick.js:135:7)"</span>,
            <span class="hljs-attr">"v"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513881031694</span>
        },
        {
            <span class="hljs-attr">"pid"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"hostname"</span>: <span class="hljs-string">"ip-10-29-4-186"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus"</span>,
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-attr">"msg"</span>: <span class="hljs-string">"Provider info not provided"</span>,
            <span class="hljs-attr">"file"</span>: <span class="hljs-string">"discover-pdrs/index.js"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Error"</span>,
            <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"ProviderNotFound: Provider info not provided\n    at handler (/var/task/index.js:8962:20)\n    at Promise (/var/task/cumulus-sled/index.js:82:5)\n    at invokeHandler (/var/task/cumulus-sled/index.js:72:10)\n    at then.then.then (/var/task/cumulus-sled/index.js:112:14)\n    at process._tickDomainCallback (internal/process/next_tick.js:135:7)"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Provider info not provided"</span>,
            <span class="hljs-attr">"v"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513879654040</span>
        },
        {
            <span class="hljs-attr">"pid"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"hostname"</span>: <span class="hljs-string">"ip-10-29-4-186"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus"</span>,
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-attr">"msg"</span>: <span class="hljs-string">"Provider info not provided"</span>,
            <span class="hljs-attr">"file"</span>: <span class="hljs-string">"discover-pdrs/index.js"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Error"</span>,
            <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"ProviderNotFound: Provider info not provided\n    at handler (/var/task/index.js:8962:20)\n    at Promise (/var/task/cumulus-sled/index.js:82:5)\n    at invokeHandler (/var/task/cumulus-sled/index.js:72:10)\n    at then.then.then (/var/task/cumulus-sled/index.js:112:14)\n    at process._tickDomainCallback (internal/process/next_tick.js:135:7)"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Provider info not provided"</span>,
            <span class="hljs-attr">"v"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1513879435010</span>
        }
    ]
}</pre>
<h4 id="example-request-for-errors">Example request for errors</h4>
<pre class='hljs'>$ curl https://example.com/logs?level=error --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-for-errors">Example response for errors</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"logs"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">181</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">50</span>,
            <span class="hljs-attr">"msg"</span>: <span class="hljs-string">"Unexpected HTTP status code: 404"</span>,
            <span class="hljs-attr">"pid"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"hostname"</span>: <span class="hljs-string">"ip-10-26-125-174"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus"</span>,
            <span class="hljs-attr">"file"</span>: <span class="hljs-string">"sync-granule/index.js"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Error"</span>,
            <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"Error: Unexpected HTTP status code: 404\n    at ClientRequest.&lt;anonymous&gt; (/var/task/sync-granule/index.js:125136:29)\n    at ClientRequest.g (events.js:292:16)\n    at emitOne (events.js:96:13)\n    at ClientRequest.emit (events.js:188:7)\n    at HTTPParser.parserOnIncomingClient (_http_client.js:473:21)\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:99:23)\n    at TLSSocket.socketOnData (_http_client.js:362:20)\n    at emitOne (events.js:96:13)\n    at TLSSocket.emit (events.js:188:7)\n    at readableAddChunk (_stream_readable.js:176:18)"</span>,
            <span class="hljs-attr">"code"</span>: <span class="hljs-number">404</span>,
            <span class="hljs-attr">"v"</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1515446810226</span>
        }
    ]
}</pre>
</div></div><div data-title="Retrieve Logs" class="keyline-top section contain clearfix " data-reactid="239"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="240"><h2 id="retrieve-logs">Retrieve Logs</h2>
<p><strong>Note:</strong> This endpoint will only work if logs are being delivered to the Metrics system. Otherwise it will
return a 400 Error.</p>
<p>Retrieve all logs from a specific execution.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="241"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/logs/<span class="strong">{executionName}</span></div>
    </div>
<h4 id="example-request-37">Example request</h4>
<pre class='hljs'>$ curl https://example.com/logs/93e5e049-89aa-47e5-900d-0eec87327260?<span class="hljs-built_in">limit</span>=5 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-36">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"test-src-integration"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"logs"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">5</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">10</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">"executions"</span>: <span class="hljs-string">"93e5e049-89aa-47e5-900d-0eec87327260"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-08-15T19:23:57.752Z"</span>,
            <span class="hljs-attr">"sender"</span>: <span class="hljs-string">"test-src-integration-PostToCmr"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Published MOD09GQ.A8009365.7JQhni.006.6594428626875 to the CMR. conceptId: G1223210348-CUMULUS"</span>,
            <span class="hljs-attr">"RequestId"</span>: <span class="hljs-string">"05712fb1-5593-4640-b5a3-a99db41d8003"</span>
        },
        {
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">"executions"</span>: <span class="hljs-string">"93e5e049-89aa-47e5-900d-0eec87327260"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-08-15T19:23:42.054Z"</span>,
            <span class="hljs-attr">"sender"</span>: <span class="hljs-string">"test-src-integration-SyncGranuleNoVpc"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"uploaded s3://cumulus-test-sandbox-internal/file-staging/test-src-integration/MOD09GQ___006/MOD09GQ.A8009365.7JQhni.006.6594428626875.hdf"</span>,
            <span class="hljs-attr">"RequestId"</span>: <span class="hljs-string">"a20698f3-a9a1-4e64-acbf-09ef77827fbc"</span>
        },
        {
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">"executions"</span>: <span class="hljs-string">"93e5e049-89aa-47e5-900d-0eec87327260"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-08-15T19:23:41.913Z"</span>,
            <span class="hljs-attr">"sender"</span>: <span class="hljs-string">"test-src-integration-SyncGranuleNoVpc"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Finishing downloading s3://cumulus-test-sandbox-internal/cumulus-test-data/pdrs/MOD09GQ.A8009365.7JQhni.006.6594428626875.hdf"</span>,
            <span class="hljs-attr">"RequestId"</span>: <span class="hljs-string">"a20698f3-a9a1-4e64-acbf-09ef77827fbc"</span>
        },
        {
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">"executions"</span>: <span class="hljs-string">"93e5e049-89aa-47e5-900d-0eec87327260"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-08-15T19:23:41.888Z"</span>,
            <span class="hljs-attr">"sender"</span>: <span class="hljs-string">"test-src-integration-SyncGranuleNoVpc"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"uploaded s3://cumulus-test-sandbox-internal/file-staging/test-src-integration/MOD09GQ___006/MOD09GQ.A8009365.7JQhni.006.6594428626875_ndvi.jpg"</span>,
            <span class="hljs-attr">"RequestId"</span>: <span class="hljs-string">"a20698f3-a9a1-4e64-acbf-09ef77827fbc"</span>
        },
        {
            <span class="hljs-attr">"level"</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">"executions"</span>: <span class="hljs-string">"93e5e049-89aa-47e5-900d-0eec87327260"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"2018-08-15T19:23:41.886Z"</span>,
            <span class="hljs-attr">"sender"</span>: <span class="hljs-string">"test-src-integration-SyncGranuleNoVpc"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"uploaded s3://cumulus-test-sandbox-internal/file-staging/test-src-integration/MOD09GQ___006/MOD09GQ.A8009365.7JQhni.006.6594428626875.hdf.met"</span>,
            <span class="hljs-attr">"RequestId"</span>: <span class="hljs-string">"a20698f3-a9a1-4e64-acbf-09ef77827fbc"</span>
        }
    ]
}</pre>
</div></div><div data-title="Get Granule CSV file" class="keyline-top section contain clearfix " data-reactid="242"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="243"><h2 id="get-granule-csv-file">Get Granule CSV file</h2>
<p>Get a CSV file of all the granule in the Cumulus database.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="244"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/granule-csv</div>
    </div>
<h4 id="example-request-38">Example request</h4>
<pre class='hljs'>$ curl https://example.com/granule-csv --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-37">Example response</h4>
<pre class='hljs'>"granuleUr","collectionId","createdAt","startDateTime","endDateTime","status","updatedAt","published"
"MOD14A1.A9506271.IvEJsu.006.8359924290786","MOD14A1___006","2020-05-18T20:15:54.525Z","2017-10-24T00:00:00Z","2017-11-08T23:59:59Z","completed","2020-05-18T20:16:02.473Z",false
"MYD13Q1.A9663671.0zkwKH.006.9812354158395","MYD13Q1___006","2020-07-06T19:46:19.957Z","2017-10-24T00:00:00Z","2017-11-08T23:59:59Z","completed","2020-07-06T19:46:57.054Z",true</pre>
</div></div><div data-title="List executions" class="keyline-top section contain clearfix " data-reactid="245"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="246"><h2 id="list-executions">List executions</h2>
<p>List executions.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="247"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/executions</div>
    </div>
<h4 id="example-request-39">Example request</h4>
<pre class='hljs'>$ curl https://example.com/executions?<span class="hljs-built_in">limit</span>=3 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-38">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"meta"</span>: {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
    <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"test-src-integration"</span>,
    <span class="hljs-attr">"table"</span>: <span class="hljs-string">"execution"</span>,
    <span class="hljs-attr">"limit"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"count"</span>: <span class="hljs-number">447</span>
  },
  <span class="hljs-attr">"results"</span>: [
    {
      <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:08aa40f8-7d91-41b4-986e-d12ce495aec5"</span>,
      <span class="hljs-attr">"duration"</span>: <span class="hljs-number">1.693</span>,
      <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1534443719571</span>,
      <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:08aa40f8-7d91-41b4-986e-d12ce495aec5"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"08aa40f8-7d91-41b4-986e-d12ce495aec5"</span>,
      <span class="hljs-attr">"error"</span>: {},
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"IngestGranule"</span>,
      <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
      <span class="hljs-attr">"tasks"</span>: {},
      <span class="hljs-attr">"status"</span>: <span class="hljs-string">"running"</span>,
      <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1534443721559</span>,
      <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1534443721265</span>
    },
    {
      <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:bee18782-e987-4bd4-b726-41669e489e2f"</span>,
      <span class="hljs-attr">"duration"</span>: <span class="hljs-number">1.718</span>,
      <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1534443706867</span>,
      <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:bee18782-e987-4bd4-b726-41669e489e2f"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"bee18782-e987-4bd4-b726-41669e489e2f"</span>,
      <span class="hljs-attr">"error"</span>: {},
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"IngestGranule"</span>,
      <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
      <span class="hljs-attr">"tasks"</span>: {},
      <span class="hljs-attr">"status"</span>: <span class="hljs-string">"running"</span>,
      <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1534443709043</span>,
      <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1534443708585</span>
    },
    {
      <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:55d62b27-50cd-4cc1-81f9-e425cf10532e"</span>,
      <span class="hljs-attr">"duration"</span>: <span class="hljs-number">29.397</span>,
      <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1534443668185</span>,
      <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:55d62b27-50cd-4cc1-81f9-e425cf10532e"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"55d62b27-50cd-4cc1-81f9-e425cf10532e"</span>,
      <span class="hljs-attr">"error"</span>: {
        <span class="hljs-attr">"Cause"</span>: <span class="hljs-string">"None"</span>,
        <span class="hljs-attr">"Error"</span>: <span class="hljs-string">"Unknown Error"</span>
      },
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"IngestGranule"</span>,
      <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
      <span class="hljs-attr">"tasks"</span>: {},
      <span class="hljs-attr">"status"</span>: <span class="hljs-string">"completed"</span>,
      <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1534443698322</span>,
      <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1534443697582</span>
    }
  ]
}</pre>
</div></div><div data-title="Retrieve Execution" class="keyline-top section contain clearfix " data-reactid="248"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="249"><h2 id="retrieve-execution">Retrieve Execution</h2>
<p>Retrieve details for a specific execution.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="250"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/executions/<span class="strong">{executionArn}</span></div>
    </div>
<h4 id="example-request-40">Example request</h4>
<pre class='hljs'>$ curl https://example.com/executions/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-39">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735"</span>,
    <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1534441782302</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"completed"</span>,
    <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1534441782302</span>,
    <span class="hljs-attr">"tasks"</span>:
    {
        <span class="hljs-attr">"MoveGranuleStep"</span>:
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"test-src-integration-MoveGranules"</span>,
            <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-MoveGranules"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>
        },
        <span class="hljs-attr">"ProcessingStep"</span>:
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"test-src-integration-FakeProcessing"</span>,
            <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-FakeProcessing"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>
        },
        <span class="hljs-attr">"StopStatus"</span>:
        {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"test-src-integration-SfSnsReport"</span>,
            <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-SfSnsReport"</span>,
            <span class="hljs-attr">"version"</span>: <span class="hljs-string">"$LATEST"</span>
        }
    },
    <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1534441752026</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-number">30.276</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cff1266e-ef36-664f-a649-3a4d26bd1735"</span>,
    <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735"</span>,
    <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
    <span class="hljs-attr">"error"</span>:
    {
        <span class="hljs-attr">"Error"</span>: <span class="hljs-string">"Unknown Error"</span>,
        <span class="hljs-attr">"Cause"</span>: <span class="hljs-string">"None"</span>
    },
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"IngestGranule"</span>,
    <span class="hljs-attr">"originalPayload"</span>: { <span class="hljs-attr">"somePayloadKey"</span>: <span class="hljs-string">"object containing payload at execution start"</span> },
    <span class="hljs-attr">"finalPayload"</span>: { <span class="hljs-attr">"somePayloadKey"</span> : <span class="hljs-string">"object containing the last reported payload from an execution"</span> }
}</pre>
</div></div><div data-title="Retrieve Execution Status" class="keyline-top section contain clearfix " data-reactid="251"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="252"><h2 id="retrieve-execution-status">Retrieve Execution Status</h2>
<p>Retrieve details and status of a specific execution. This also returns execution history and details of the state machine when the execution exists in Step Function API.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="253"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/executions/status/<span class="strong">{executionArn}</span></div>
    </div>
<h4 id="example-request-41">Example request</h4>
<pre class='hljs'>$ curl https://example.com/executions/status/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl6sgv:d0a6584b-bea6-476e-a745-c1feb2ad00b2 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-40">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"presignedS3Url"</span>: <span class="hljs-string">"https://example.amazonaws.com/example"</span>,
  <span class="hljs-attr">"data"</span>: <span class="hljs-string">"Execution status data, see example below"</span>
}</pre>
<pre class='hljs'>{
  <span class="hljs-attr">"presignedS3Url"</span>: <span class="hljs-string">"https://example.amazonaws.com/example"</span>,
  <span class="hljs-attr">"data"</span>: <span class="hljs-string">"Error: Execution Status for execution123 exceeded maximum allowed payload size"</span>
}</pre>
<h4 id="execution-status">Execution status</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"execution"</span>:
    {
        <span class="hljs-attr">"executionArn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl4sgv:d0a6584b-bea6-476e-a745-c1feb2ad00b2"</span>,
        <span class="hljs-attr">"stateMachineArn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:stateMachine:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl4sgv"</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"d0a6584b-bea6-476e-a745-c1feb2ad00b2"</span>,
        <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCEEDED"</span>,
        <span class="hljs-attr">"startDate"</span>: <span class="hljs-string">"2018-08-16T18:39:32.209Z"</span>,
        <span class="hljs-attr">"stopDate"</span>: <span class="hljs-string">"2018-08-16T18:39:59.089Z"</span>,
        <span class="hljs-attr">"input"</span>:
        {
            <span class="hljs-attr">"foo"</span>: <span class="hljs-string">"input"</span>
        },
        <span class="hljs-attr">"output"</span>:
        {
            <span class="hljs-attr">"bar"</span>: <span class="hljs-string">"output"</span>
        }
    },
    <span class="hljs-attr">"executionHistory"</span>:
    {
        <span class="hljs-attr">"events"</span>:
        [
            {
                <span class="hljs-attr">"taskName"</span>: <span class="hljs-string">"foo bar 1"</span>
            },
            {
                <span class="hljs-attr">"taskName"</span>: <span class="hljs-string">"foo bar 2"</span>
            }
        ]
    },
    <span class="hljs-attr">"stateMachine"</span>:
    {
        <span class="hljs-attr">"stateMachineArn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:stateMachine:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl4sgv"</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl4sgv"</span>,
        <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ACTIVE"</span>,
        <span class="hljs-attr">"definition"</span>:
        {
            <span class="hljs-attr">"Comment"</span>: <span class="hljs-string">"Ingest Granule"</span>,
            <span class="hljs-attr">"StartAt"</span>: <span class="hljs-string">"First State"</span>,
            <span class="hljs-attr">"States"</span>:
            {
                <span class="hljs-attr">"First State"</span>: {}
            }
        },
        <span class="hljs-attr">"roleArn"</span>: <span class="hljs-string">"arn:aws:iam::123456789012:role/test-src-integration-steprole"</span>,
        <span class="hljs-attr">"creationDate"</span>: <span class="hljs-string">"2018-06-11T16:08:17.533Z"</span>
    }
}</pre>
</div></div><div data-title="Search Executions By Granules" class="keyline-top section contain clearfix " data-reactid="254"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="255"><h2 id="search-executions-by-granules">Search Executions By Granules</h2>
<p>Return executions associated with specific granules. Granules can be sent as a list of granule objects containing granuleIds and collectionIds or as an Elasticsearch query to the Metrics' Elasticsearch.</p>
<p>Overview of the request fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>granules</code></td>
<td><code>yes</code> - if <code>query</code> not present</td>
<td><code>Array&#x3C;Object></code></td>
<td>List of granules to process. Each granule must contain a granuleId and collectionId</td>
</tr>
<tr>
<td>-- <code>granule.granuleId</code></td>
<td><code>yes</code> - if using <code>granules</code></td>
<td><code>string</code></td>
<td>GranuleId for a granule</td>
</tr>
<tr>
<td>-- <code>granule.collectionId</code></td>
<td><code>yes</code> - if using <code>granules</code></td>
<td><code>string</code></td>
<td>CollectionId for a granule</td>
</tr>
<tr>
<td><code>query</code></td>
<td><code>yes</code> - if <code>granules</code> not present</td>
<td><code>Object</code></td>
<td>Query to Elasticsearch to determine which Granules with which to search. Required if no IDs are given.</td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>yes</code> - if <code>query</code> is present</td>
<td><code>string</code></td>
<td>Elasticsearch index to search with the given query</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="256"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/executions/search-by-granules</div>
    </div>
<h4 id="example-request-with-given-granules">Example request with given Granules:</h4>
<pre class='hljs'>curl -X POST
  https://example.com/executions/search-by-granules?<span class="hljs-built_in">limit</span>=3 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{"granules": [{ "granuleId":"MOD09GQ.A2016358.h13v04.006.2016360104606", "collectionId": "MOD09GQ___006"}]}'</span></pre>
<h4 id="example-request-with-elasticsearch-query-generated-by-kibana-3">Example request with Elasticsearch query generated by Kibana:</h4>
<pre class='hljs'>$ curl --request POST \
    https://example.com/executions/search-by-granules?<span class="hljs-built_in">limit</span>=3 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
        "index": "index-in-es",
        "query": {
            "size": 500,
            "query": {
                "filter": [
                    {
                        "bool": {
                            "filter": [
                                {
                                    "bool": {
                                        "should": [{"match": {"granuleId": "MOD09GQ.A2016358.h13v04.006.2016360104606"}}],
                                        "minimum_should_match": 1
                                    }
                                },
                                {
                                    "bool": {
                                        "should": [{"match": {"collectionId": "MOD09GQ__006"}}],
                                        "minimum_should_match": 1
                                    }
                                }
                            ]
                        }
                    }
                ],
                "should": [],
                "must_not": []
            }
        }
    }'</span></pre>
<h4 id="example-response-41">Example response</h4>
<pre class='hljs'>{
   <span class="hljs-attr">"meta"</span>: {
       <span class="hljs-attr">"count"</span>: <span class="hljs-number">3</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:08aa40f8-7d91-41b4-986e-d12ce495aec5"</span>,
            <span class="hljs-attr">"duration"</span>: <span class="hljs-number">1.693</span>,
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1534443719571</span>,
            <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:08aa40f8-7d91-41b4-986e-d12ce495aec5"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"08aa40f8-7d91-41b4-986e-d12ce495aec5"</span>,
            <span class="hljs-attr">"error"</span>: {},
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"IngestGranule"</span>,
            <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
            <span class="hljs-attr">"tasks"</span>: {},
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"running"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1534443721559</span>,
            <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1534443721265</span>
        },
        {
            <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:bee18782-e987-4bd4-b726-41669e489e2f"</span>,
            <span class="hljs-attr">"duration"</span>: <span class="hljs-number">1.718</span>,
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1534443706867</span>,
            <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:bee18782-e987-4bd4-b726-41669e489e2f"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"bee18782-e987-4bd4-b726-41669e489e2f"</span>,
            <span class="hljs-attr">"error"</span>: {},
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"IngestGranule"</span>,
            <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
            <span class="hljs-attr">"tasks"</span>: {},
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"running"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1534443709043</span>,
            <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1534443708585</span>
        },
        {
            <span class="hljs-attr">"arn"</span>: <span class="hljs-string">"arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:55d62b27-50cd-4cc1-81f9-e425cf10532e"</span>,
            <span class="hljs-attr">"duration"</span>: <span class="hljs-number">29.397</span>,
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1534443668185</span>,
            <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:55d62b27-50cd-4cc1-81f9-e425cf10532e"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"55d62b27-50cd-4cc1-81f9-e425cf10532e"</span>,
            <span class="hljs-attr">"error"</span>: {
            <span class="hljs-attr">"Cause"</span>: <span class="hljs-string">"None"</span>,
            <span class="hljs-attr">"Error"</span>: <span class="hljs-string">"Unknown Error"</span>
            },
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"IngestGranule"</span>,
            <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
            <span class="hljs-attr">"tasks"</span>: {},
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"completed"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1534443698322</span>,
            <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1534443697582</span>
        }
    ]
}</pre>
</div></div><div data-title="Workflows By Granules" class="keyline-top section contain clearfix " data-reactid="257"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="258"><h2 id="workflows-by-granules">Workflows By Granules</h2>
<p>Return the workflows that have run on specific granules. If multiple granules are specified, it will return the intersection of workflows that have run on ALL the granules. That is, only a workflow that has been run on every inputted granule will be returned</p>
<p>Overview of the request fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>granules</code></td>
<td><code>yes</code> - if <code>query</code> not present</td>
<td><code>Array&#x3C;Object></code></td>
<td>List of granules to process. Each granule must contain a granuleId and collectionId</td>
</tr>
<tr>
<td>-- <code>granule.granuleId</code></td>
<td><code>yes</code> - if using <code>granules</code></td>
<td><code>string</code></td>
<td>GranuleId for a granule</td>
</tr>
<tr>
<td>-- <code>granule.collectionId</code></td>
<td><code>yes</code> - if using <code>granules</code></td>
<td><code>string</code></td>
<td>CollectionId for a granule</td>
</tr>
<tr>
<td><code>query</code></td>
<td><code>yes</code> - if <code>granules</code> not present</td>
<td><code>Object</code></td>
<td>Query to Elasticsearch to determine which Granules with which to search. Required if no IDs are given.</td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>yes</code> - if <code>query</code> is present</td>
<td><code>string</code></td>
<td>Elasticsearch index to search with the given query</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="259"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/executions/workflows-by-granules</div>
    </div>
<h4 id="example-request-with-given-granules-1">Example request with given Granules:</h4>
<pre class='hljs'>curl -X POST
  https://example.com/executions/workflows-by-granules --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{"granules": [{ "granuleId":"MOD09GQ.A2016358.h13v04.006.2016360104606", "collectionId": "MOD09GQ___006"}]}'</span></pre>
<h4 id="example-request-with-elasticsearch-query-generated-by-kibana-4">Example request with Elasticsearch query generated by Kibana:</h4>
<pre class='hljs'>$ curl --request POST \
    https://example.com/executions/workflows-by-granules --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> \
  --header <span class="hljs-string">'Content-Type: application/json'</span> \
  --data <span class="hljs-string">'{
        "index": "index-in-es",
        "query": {
            "size": 500,
            "query": {
                "filter": [
                    {
                        "bool": {
                            "filter": [
                                {
                                    "bool": {
                                        "should": [{"match": {"granuleId": "MOD09GQ.A2016358.h13v04.006.2016360104606"}}],
                                        "minimum_should_match": 1
                                    }
                                },
                                {
                                    "bool": {
                                        "should": [{"match": {"collectionId": "MOD09GQ__006"}}],
                                        "minimum_should_match": 1
                                    }
                                }
                            ]
                        }
                    }
                ],
                "should": [],
                "must_not": []
            }
        }
    }'</span></pre>
<h4 id="example-response-42">Example response</h4>
<pre class='hljs'>[
    <span class="hljs-string">"DiscoverGranules"</span>,
    <span class="hljs-string">"IngestGranules"</span>
]</pre>
</div></div><div data-title="Create execution" class="keyline-top section contain clearfix " data-reactid="260"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="261"><h2 id="create-execution">Create execution</h2>
<p>Create an execution. An execution generally includes the fields listed below.</p>
<p>Overview of the schema fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arn</code></td>
<td><code>string</code></td>
<td><code>yes</code></td>
<td>execution arn (this field is unique)</td>
</tr>
<tr>
<td><code>asyncOperationId</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td><code>id</code> of the associated async operation</td>
</tr>
<tr>
<td><code>collectionId</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>collectionId of the associated collection (e.g. <code>&#x3C;name>___&#x3C;version></code> where <code>&#x3C;name></code> is the collection name and <code>&#x3C;version></code> is the collection version)</td>
</tr>
<tr>
<td><code>cumulusVersion</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>cumulus version for the execution (e.g. <code>9.0.0</code>)</td>
</tr>
<tr>
<td><code>duration</code></td>
<td><code>number</code></td>
<td><code>no</code></td>
<td>duration of the execution</td>
</tr>
<tr>
<td><code>error</code></td>
<td><code>object</code></td>
<td><code>no</code></td>
<td>the error details in case of a failed execution</td>
</tr>
<tr>
<td><code>execution</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>the execution page url on AWS console</td>
</tr>
<tr>
<td><code>finalPayload</code></td>
<td><code>object</code></td>
<td><code>no</code></td>
<td>the final payload of this execution</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td><code>yes</code></td>
<td>execution name</td>
</tr>
<tr>
<td><code>originalPayload</code></td>
<td><code>object</code></td>
<td><code>no</code></td>
<td>the original payload for this execution</td>
</tr>
<tr>
<td><code>parentArn</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>arn of the parent execution</td>
</tr>
<tr>
<td><code>status</code></td>
<td><code>string</code></td>
<td><code>yes</code></td>
<td>the execution status, possible values: <code>running</code>, <code>completed</code>, <code>failed</code>, <code>unknown</code></td>
</tr>
<tr>
<td><code>tasks</code></td>
<td><code>object</code></td>
<td><code>no</code></td>
<td>the tasks for this execution</td>
</tr>
<tr>
<td><code>type</code></td>
<td><code>string</code></td>
<td><code>no</code></td>
<td>the workflow name, e.g. IngestGranule</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>number</code></td>
<td><code>no</code></td>
<td>the timestamp for this execution</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="262"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/executions</div>
    </div>
<h4 id="example-request-42">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/executions --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
    "arn": "arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735",
    "asyncOperationId": "c4ece1f9-dca0-42f8-be77-da43b9b25918",
    "collectionId": "MOD09GQ___006",
    "cumulusVersion": "1.2.3",
    "error": {},
    "execution": "https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735",
    "name": "cff1266e-ef36-664f-a649-3a4d26bd1735",
    "originalPayload": { "somePayloadKey": "object containing payload at execution start" },
    "parentArn": "arn:aws:states:us-east-1:123456789012:execution:test-src-integration-ParsePdr:59edd6a4-5187-4865-b3c3-71ebcf76d7a1",
    "status": "running",
    "tasks":
    {
        "MoveGranuleStep":
        {
            "name": "test-src-integration-MoveGranules",
            "arn": "arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-MoveGranules",
            "version": "$LATEST"
        },
        "ProcessingStep":
        {
            "name": "test-src-integration-FakeProcessing",
            "arn": "arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-FakeProcessing",
            "version": "$LATEST"
        },
        "StopStatus":
        {
            "name": "test-src-integration-SfSnsReport",
            "arn": "arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-SfSnsReport",
            "version": "$LATEST"
        }
    },
    "type": "IngestGranule",
    "timestamp": 1513020462156
}'</span></pre>
<h4 id="example-response-43">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Successfully wrote execution with arn arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735"</span>
}</pre>
</div></div><div data-title="Update or replace execution" class="keyline-top section contain clearfix " data-reactid="263"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="264"><h2 id="update-or-replace-execution">Update or replace execution</h2>
<p>Update/replace an existing execution. Expects payload to specify the entire
execution object, and will completely replace the existing execution with the
specified payload. For a field reference see
<a href="#create-execution">"Create execution"</a>.</p>
<p>Returns status 200 on successful replacement, 400 if the <code>arn</code>
property in the payload does not match the corresponding value in the resource
URI, or 404 if there is no execution with the specified arn.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="265"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>PUT</div>
      <div class='pad0 code small endpoint-url'>/executions/<span class="strong">{executionArn}</span></div>
    </div>
<h4 id="example-request-43">Example request</h4>
<pre class='hljs'>$ curl --request PUT https://example.com/executions/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
    "arn": "arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735",
    "asyncOperationId": "c4ece1f9-dca0-42f8-be77-da43b9b25918",
    "collectionId": "MOD09GQ___006",
    "cumulusVersion": "1.2.3",
    "duration": 30.276,
    "error": {},
    "execution": "https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735",
    "finalPayload": { "somePayloadKey" : "object containing the last reported payload from an execution" },
    "name": "cff1266e-ef36-664f-a649-3a4d26bd1735",
    "originalPayload": { "somePayloadKey": "object containing payload at execution start" },
    "parentArn": "arn:aws:states:us-east-1:123456789012:execution:test-src-integration-ParsePdr:59edd6a4-5187-4865-b3c3-71ebcf76d7a1",
    "status": "completed",
    "tasks":
    {
        "MoveGranuleStep":
        {
            "name": "test-src-integration-MoveGranules",
            "arn": "arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-MoveGranules",
            "version": "$LATEST"
        },
        "ProcessingStep":
        {
            "name": "test-src-integration-FakeProcessing",
            "arn": "arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-FakeProcessing",
            "version": "$LATEST"
        },
        "StopStatus":
        {
            "name": "test-src-integration-SfSnsReport",
            "arn": "arn:aws:lambda:us-east-1:123456789012:function:test-src-integration-SfSnsReport",
            "version": "$LATEST"
        }
    },
    "type": "IngestGranule",
    "timestamp": 1513020462156
}'</span></pre>
<h4 id="example-response-44">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Successfully updated execution with arn arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735"</span>
}</pre>
</div></div><div data-title="Delete execution" class="keyline-top section contain clearfix " data-reactid="266"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="267"><h2 id="delete-execution">Delete execution</h2>
<p>Delete an execution from Cumulus.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="268"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/executions/<span class="strong">{executionArn}</span></div>
    </div>
<h4 id="example-request-44">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/executions/arn:aws:states:us-east-1:123456789012:execution:TestSrcIntegrationIngestGranuleStateMachine-UhCSmszl2sgv:cff1266e-ef36-664f-a649-3a4d26bd1735 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-45">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Record deleted"</span>
}</pre>
</div></div><div data-title="List workflows" class="keyline-top section contain clearfix " data-reactid="269"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="270"><h2 id="list-workflows">List workflows</h2>
<p>List workflows in the Cumulus system.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="271"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/workflows</div>
    </div>
<h4 id="example-request-45">Example request</h4>
<pre class='hljs'>$ curl https://example.com/workflows --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-46">Example response</h4>
<pre class='hljs'>[
    {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"TestLambdaVersionWorkflow"</span>,
        <span class="hljs-attr">"template"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/cumulus/workflows/TestLambdaVersionWorkflow.json"</span>,
        <span class="hljs-attr">"definition"</span>: {
            <span class="hljs-attr">"Comment"</span>: <span class="hljs-string">"Tests Lambda update after redeploy"</span>,
            <span class="hljs-attr">"StartAt"</span>: <span class="hljs-string">"StartStatus"</span>,
            <span class="hljs-attr">"States"</span>: {
                <span class="hljs-attr">"StartStatus"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                    <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${SfSnsReportLambdaAliasOutput}"</span>,
                    <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"WaitForDeployment"</span>
                },
                <span class="hljs-attr">"WaitForDeployment"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                    <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${WaitForDeploymentLambdaAliasOutput}"</span>,
                    <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"VersionUpTest"</span>
                },
                <span class="hljs-attr">"VersionUpTest"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                    <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${VersionUpTestLambdaAliasOutput}"</span>,
                    <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"StopStatus"</span>
                },
                <span class="hljs-attr">"StopStatus"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                    <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${SfSnsReportLambdaAliasOutput}"</span>,
                    <span class="hljs-attr">"Catch"</span>: [
                        {
                            <span class="hljs-attr">"ErrorEquals"</span>: [
                                <span class="hljs-string">"States.ALL"</span>
                            ],
                            <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"WorkflowFailed"</span>
                        }
                    ],
                    <span class="hljs-attr">"End"</span>: <span class="hljs-literal">true</span>
                },
                <span class="hljs-attr">"WorkflowFailed"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Fail"</span>,
                    <span class="hljs-attr">"Cause"</span>: <span class="hljs-string">"Workflow failed"</span>
                }
            }
        }
    },
    {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"HelloWorldWorkflow"</span>,
        <span class="hljs-attr">"template"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/cumulus/workflows/HelloWorldWorkflow.json"</span>,
        <span class="hljs-attr">"definition"</span>: {
            <span class="hljs-attr">"Comment"</span>: <span class="hljs-string">"Returns Hello World"</span>,
            <span class="hljs-attr">"StartAt"</span>: <span class="hljs-string">"StartStatus"</span>,
            <span class="hljs-attr">"States"</span>: {
                <span class="hljs-attr">"StartStatus"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                    <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${SfSnsReportLambdaAliasOutput}"</span>,
                    <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"HelloWorld"</span>
                },
                <span class="hljs-attr">"HelloWorld"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                    <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${HelloWorldLambdaAliasOutput}"</span>,
                    <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"StopStatus"</span>
                },
                <span class="hljs-attr">"StopStatus"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                    <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${SfSnsReportLambdaAliasOutput}"</span>,
                    <span class="hljs-attr">"Catch"</span>: [
                        {
                            <span class="hljs-attr">"ErrorEquals"</span>: [
                                <span class="hljs-string">"States.ALL"</span>
                            ],
                            <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"WorkflowFailed"</span>
                        }
                    ],
                    <span class="hljs-attr">"End"</span>: <span class="hljs-literal">true</span>
                },
                <span class="hljs-attr">"WorkflowFailed"</span>: {
                    <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Fail"</span>,
                    <span class="hljs-attr">"Cause"</span>: <span class="hljs-string">"Workflow failed"</span>
                }
            }
        }
    }
]</pre>
</div></div><div data-title="Retrieve workflow" class="keyline-top section contain clearfix " data-reactid="272"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="273"><h2 id="retrieve-workflow">Retrieve workflow</h2>
<p>Retrieve a single workflow.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="274"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/workflow/<span class="strong">{name}</span></div>
    </div>
<h4 id="example-request-46">Example request</h4>
<pre class='hljs'>$ curl https://example.com/workflows/HelloWorldWorkflow --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-47">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"HelloWorldWorkflow"</span>,
    <span class="hljs-attr">"template"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/cumulus/workflows/HelloWorldWorkflow.json"</span>,
    <span class="hljs-attr">"definition"</span>: {
        <span class="hljs-attr">"Comment"</span>: <span class="hljs-string">"Returns Hello World"</span>,
        <span class="hljs-attr">"StartAt"</span>: <span class="hljs-string">"StartStatus"</span>,
        <span class="hljs-attr">"States"</span>: {
            <span class="hljs-attr">"StartStatus"</span>: {
                <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${SfSnsReportLambdaAliasOutput}"</span>,
                <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"HelloWorld"</span>
            },
            <span class="hljs-attr">"HelloWorld"</span>: {
                <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${HelloWorldLambdaAliasOutput}"</span>,
                <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"StopStatus"</span>
            },
            <span class="hljs-attr">"StopStatus"</span>: {
                <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Task"</span>,
                <span class="hljs-attr">"Resource"</span>: <span class="hljs-string">"${SfSnsReportLambdaAliasOutput}"</span>,
                <span class="hljs-attr">"Catch"</span>: [
                    {
                        <span class="hljs-attr">"ErrorEquals"</span>: [
                            <span class="hljs-string">"States.ALL"</span>
                        ],
                        <span class="hljs-attr">"Next"</span>: <span class="hljs-string">"WorkflowFailed"</span>
                    }
                ],
                <span class="hljs-attr">"End"</span>: <span class="hljs-literal">true</span>
            },
            <span class="hljs-attr">"WorkflowFailed"</span>: {
                <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"Fail"</span>,
                <span class="hljs-attr">"Cause"</span>: <span class="hljs-string">"Workflow failed"</span>
            }
        }
    }
}</pre>
</div></div><div data-title="List async operations" class="keyline-top section contain clearfix " data-reactid="275"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="276"><h2 id="list-async-operations">List async operations</h2>
<p>Async operations are long-running requests serviced by the Cumulus API.</p>
<p>These tend to be bulk operations. Examples include bulk granule operations and replaying ingest notifications.</p>
<p>This endpoint lists async operations in the Cumulus system.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="277"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/asyncOperations</div>
    </div>
<h4 id="example-request-47">Example request</h4>
<pre class='hljs'>$ curl https://example.com/asyncOperations --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-48">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"asyncOperation"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">8</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
          <span class="hljs-attr">"output"</span>: <span class="hljs-string">"{\"deletedGranules\":[\"granule-id-f02a53418f\"]}"</span>,
          <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1591384094512</span>,
          <span class="hljs-attr">"taskArn"</span>: <span class="hljs-string">"arn:aws:ecs:us-east-1:111111111111:task/d481e76e-f5fc-9c1c-2411-fa13779b111a"</span>,
          <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Bulk granule deletion"</span>,
          <span class="hljs-attr">"operationType"</span>: <span class="hljs-string">"Bulk Granule Delete"</span>,
          <span class="hljs-attr">"id"</span>: <span class="hljs-string">"0eb8e809-8790-5409-1239-bcd9e8d28b8e"</span>,
          <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCEEDED"</span>,
          <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1591384094512</span>,
          <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1591384095235</span>
        }
    ]
}</pre>
</div></div><div data-title="Retrieve async operation" class="keyline-top section contain clearfix " data-reactid="278"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="279"><h2 id="retrieve-async-operation">Retrieve async operation</h2>
<p>Retrieve information about a single async operation. Useful for determining the status of an async operation.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="280"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/asyncOperations/<span class="strong">{id}</span></div>
    </div>
<h4 id="example-request-48">Example request</h4>
<pre class='hljs'>$ curl https://example.com/asyncOperations/0eb8e809-8790-5409-1239-bcd9e8d28b8e --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-49">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"0eb8e809-8790-5409-1239-bcd9e8d28b8e"</span>,
  <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1574730504762</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"RUNNING"</span>,
  <span class="hljs-attr">"taskArn"</span>: <span class="hljs-string">"arn:aws:ecs:us-east-1:111111111111:task/d481e76e-f5fc-9c1c-2411-fa13779b111a"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Bulk granule deletion"</span>,
  <span class="hljs-attr">"operationType"</span>: <span class="hljs-string">"Bulk Granule Delete"</span>
}</pre>
</div></div><div data-title="Ingest Replays" class="keyline-top section contain clearfix " data-reactid="281"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="282"><h2 id="ingest-replays">Ingest Replays</h2>
<p>The Cumulus API supports requests to replay ingest notifications.
The schema below describes the expected fields in a replay request</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>string</td>
<td>required</td>
<td>Currently only accepts <code>kinesis</code>.</td>
</tr>
<tr>
<td><code>kinesisStream</code></td>
<td>string</td>
<td>for type <code>kinesis</code></td>
<td>Any valid kinesis stream name (<em>not</em> ARN)</td>
</tr>
<tr>
<td><code>kinesisStreamCreationTimestamp</code></td>
<td>*</td>
<td>optional</td>
<td>Any input valid for a JS Date constructor. For reasons to use this field see <a href="https://docs.aws.amazon.com/kinesis/latest/APIReference/API_ListShards.html#API_ListShards_RequestSyntax">AWS documentation on StreamCreationTimestamp</a>.</td>
</tr>
<tr>
<td><code>endTimestamp</code></td>
<td>*</td>
<td>optional</td>
<td>Any input valid for a JS Date constructor. Messages newer than this timestamp will be skipped.</td>
</tr>
<tr>
<td><code>startTimestamp</code></td>
<td>*</td>
<td>optional</td>
<td>Any input valid for a JS Date constructor. Messages will be fetched from the Kinesis stream starting at this timestamp. Ignored if it is further in the past than the stream's retention period.</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="283"><h4 id="example-request-49">Example Request</h4>
<pre class='hljs'>$ curl -X POST https://example.com/replays --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --data <span class="hljs-string">'{ "type: "kinesis", "kinesisStream": "my-stream", "endTimestamp": 1567890123456, "startTimestamp": "2019-08-31T22:22:03.456Z"}'</span></pre>
<h4 id="example-response-50">Example Response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"asyncOperationId"</span>: <span class="hljs-string">"208a463a-e096-4dd9-b006-e09345319ae6"</span>
}</pre>
</div></div><div data-title="Retrieve schema" class="keyline-top section contain clearfix " data-reactid="284"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="285"><h2 id="retrieve-schema">Retrieve schema</h2>
<p>Retrieve the data schema for a particular type of Cumulus record.</p>
<p>This schema describes the expected format of a record's JSON object when retrieving from Cumulus, as well as a summary of what each field may contain. The schema response can also be used to determine which fields are required when creating a new record using the API.</p>
<p>Supported <code>type</code> values are <code>provider</code>, <code>collection</code>, <code>granule</code>, and <code>pdr</code>.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="286"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/schemas/<span class="strong">{type}</span></div>
    </div>
<h4 id="example-request-50">Example request</h4>
<pre class='hljs'>$ curl https://example.com/schemas/provider --header <span class="hljs-string">'Authorization: Bearer ReplceWithTheToken'</span></pre>
<h4 id="example-response-51">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Provider Object"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Keep the information about each ingest endpoint"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,
  <span class="hljs-attr">"properties"</span>: {
    <span class="hljs-attr">"name"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Title"</span>,
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"A title for the provider record"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"pattern"</span>: <span class="hljs-string">"^([\\w\\d_\\-]*)$"</span>
    },
    <span class="hljs-attr">"providerName"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Provider, e.g. MODAPS"</span>,
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Name of the SIP"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>
    },
    <span class="hljs-attr">"protocol"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Protocol"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"enum"</span>: [
        <span class="hljs-string">"http"</span>,
        <span class="hljs-string">"ftp"</span>
      ],
      <span class="hljs-attr">"default"</span>: <span class="hljs-string">"http"</span>
    },
    <span class="hljs-attr">"host"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Host"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>
    },
    <span class="hljs-attr">"path"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Path to the PDR/files folder"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>
    },
    <span class="hljs-attr">"config"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Configuration"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,
      <span class="hljs-attr">"properties"</span>: {
        <span class="hljs-attr">"username"</span>: {
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>
        },
        <span class="hljs-attr">"password"</span>: {
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>
        },
        <span class="hljs-attr">"port"</span>: {
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>
        }
      }
    },
    <span class="hljs-attr">"status"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Status"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>,
      <span class="hljs-attr">"enum"</span>: [
        <span class="hljs-string">"ingesting"</span>,
        <span class="hljs-string">"stopped"</span>,
        <span class="hljs-string">"failed"</span>
      ],
      <span class="hljs-attr">"default"</span>: <span class="hljs-string">"stopped"</span>,
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">"isActive"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Is Active?"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"boolean"</span>,
      <span class="hljs-attr">"default"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">"regex"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,
      <span class="hljs-attr">"patternProperties"</span>: {
        <span class="hljs-attr">"^([\\S]*)$"</span>: {
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>
        }
      },
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">"lastTimeIngestedAt"</span>: {
      <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Last Time Ingest from the Provider"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"number"</span>,
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">"createdAt"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"number"</span>,
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">"updatedAt"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"number"</span>,
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-attr">"required"</span>: [
    <span class="hljs-string">"name"</span>,
    <span class="hljs-string">"providerName"</span>,
    <span class="hljs-string">"protocol"</span>,
    <span class="hljs-string">"host"</span>,
    <span class="hljs-string">"path"</span>,
    <span class="hljs-string">"isActive"</span>,
    <span class="hljs-string">"status"</span>,
    <span class="hljs-string">"createdAt"</span>,
    <span class="hljs-string">"updatedAt"</span>
  ]
}</pre>
</div></div><div data-title="List reconciliation reports" class="keyline-top section contain clearfix " data-reactid="287"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="288"><h2 id="list-reconciliation-reports">List reconciliation reports</h2>
<p>List reconciliation reports in the Cumulus system.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="289"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/reconciliationReports</div>
    </div>
<h4 id="example-request-51">Example request</h4>
<pre class='hljs'>$ curl https://example.com/reconciliationReports --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-52">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"meta"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"cumulus-api"</span>,
        <span class="hljs-attr">"stack"</span>: <span class="hljs-string">"lpdaac-cumulus"</span>,
        <span class="hljs-attr">"table"</span>: <span class="hljs-string">"reconciliationReport"</span>,
        <span class="hljs-attr">"limit"</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">"page"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"count"</span>: <span class="hljs-number">7</span>
    },
    <span class="hljs-attr">"results"</span>: [
        {
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1589824212102</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"inventoryReport-20200518T175012101"</span>,
            <span class="hljs-attr">"location"</span>: <span class="hljs-string">"s3://lpdaac-internal/lpdaac-cumulus/reconciliation-reports/inventoryReport-20200518T175012101.json"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Inventory"</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"Generated"</span>,
            <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1589824218825</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1589824219329</span>
        },
        {
            <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1589596344305</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"ModisInternalReport"</span>,
            <span class="hljs-attr">"location"</span>: <span class="hljs-string">"s3://lpdaac-internal/lpdaac-cumulus/reconciliation-reports/ModisInternalReport.json"</span>,
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Internal"</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-string">"Generated"</span>,
            <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1589596352010</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1589596352356</span>
        }
    ]
}</pre>
</div></div><div data-title="Retrieve reconciliation report" class="keyline-top section contain clearfix " data-reactid="290"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="291"><h2 id="retrieve-reconciliation-report">Retrieve reconciliation report</h2>
<p>Retrieve a single reconciliation report.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="292"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/reconciliationReports/<span class="strong">{name}</span></div>
    </div>
<h4 id="example-request-52">Example request</h4>
<pre class='hljs'>$ curl https://example.com/reconciliationReports/inventoryReport-20190305T153430508 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-responses">Example responses</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"presignedS3Url"</span>: <span class="hljs-string">"https://example.amazonaws.com/example"</span>,
  <span class="hljs-attr">"data"</span>: <span class="hljs-string">"report data, see examples below for each report type"</span>
}</pre>
<pre class='hljs'>{
  <span class="hljs-attr">"presignedS3Url"</span>: <span class="hljs-string">"https://example.amazonaws.com/example"</span>,
  <span class="hljs-attr">"data"</span>: <span class="hljs-string">"Error: Report examplereport exceeded maximum allowed payload size"</span>
}</pre>
<h5 id="inventory-report">Inventory Report</h5>
<pre class='hljs'>{
    <span class="hljs-attr">"reportStartTime"</span>: <span class="hljs-string">"2019-03-05T15:34:30.508Z"</span>,
    <span class="hljs-attr">"reportEndTime"</span>: <span class="hljs-string">"2019-03-05T15:34:37.243Z"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>,
    <span class="hljs-attr">"error"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"reportType"</span>: <span class="hljs-string">"Inventory"</span>,
    <span class="hljs-attr">"filesInCumulus"</span>: {
        <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">40</span>,
        <span class="hljs-attr">"okCountByGranule"</span>: {
          <span class="hljs-attr">"MOD09GQ.A2016358.h13v04.006.2016360104606"</span>: <span class="hljs-number">10</span>,
          <span class="hljs-attr">"MYD13Q1.A2017297.h19v10.006.2017313221303"</span>: <span class="hljs-number">10</span>,
          <span class="hljs-attr">"MOD09GQ.A3518809.ln_rVr.006.7962927138074"</span>: <span class="hljs-number">10</span>,
          <span class="hljs-attr">"MOD09GQ.A8768252.HC4ddD.006.2077696236118"</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">"MOD09GQ.A8722843.GTk5A3.006.4026909316904"</span>: <span class="hljs-number">5</span>
        },
        <span class="hljs-attr">"onlyInS3"</span>: [
            <span class="hljs-string">"s3://cumulus-test-sandbox-protected/MOD09GQ.A2016358.h13v04.006.2016360104606.cmr.xml"</span>,
            <span class="hljs-string">"s3://cumulus-test-sandbox-private/BROWSE.MYD13Q1.A2017297.h19v10.006.2017313221201.hdf"</span>
        ],
        <span class="hljs-attr">"onlyInDynamoDb"</span>: [
            {
                <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-protected/MOD09GQ.A2016358.h13v04.006.2016360104606.hdf"</span>,
                <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD09GQ.A2016358.h13v04.006.2016360104606"</span>
            },
            {
                <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-private/MYD13Q1.A2017297.h19v10.006.2017313221303.hdf.met"</span>,
                <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MYD13Q1.A2017297.h19v10.006.2017313221303"</span>
            }
        ]
    },
    <span class="hljs-attr">"collectionsInCumulusCmr"</span>: {
        <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"onlyInCumulus"</span>: [
            <span class="hljs-string">"L2_HR_PIXC___000"</span>
        ],
        <span class="hljs-attr">"onlyInCmr"</span>: [
            <span class="hljs-string">"MCD43A1___006"</span>,
            <span class="hljs-string">"MOD14A1___006"</span>
        ]
    },
    <span class="hljs-attr">"granulesInCumulusCmr"</span>: {
        <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-attr">"onlyInCumulus"</span>: [
            {
                <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD09GQ.A3518809.ln_rVr.006.7962927138074"</span>,
                <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>
            },
            {
                <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD09GQ.A8768252.HC4ddD.006.2077696236118"</span>,
                <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>
            }
        ],
        <span class="hljs-attr">"onlyInCmr"</span>: [
            {
                <span class="hljs-attr">"GranuleUR"</span>: <span class="hljs-string">"MOD09GQ.A0002421.oD4zvB.006.4281362831355"</span>,
                <span class="hljs-attr">"ShortName"</span>: <span class="hljs-string">"MOD09GQ"</span>,
                <span class="hljs-attr">"Version"</span>: <span class="hljs-string">"006"</span>
            },
            {
                <span class="hljs-attr">"GranuleUR"</span>: <span class="hljs-string">"MOD09GQ.A0007443.H16AHq.006.7078190437865"</span>,
                <span class="hljs-attr">"ShortName"</span>: <span class="hljs-string">"MOD09GQ"</span>,
                <span class="hljs-attr">"Version"</span>: <span class="hljs-string">"006"</span>
            }
        ]
    },
    <span class="hljs-attr">"filesInCumulusCmr"</span>: {
        <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">11</span>,
        <span class="hljs-attr">"onlyInCumulus"</span>: [
            {
                <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD09GQ.A8722843.GTk5A3.006.4026909316904.jpeg"</span>,
                <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-public/MOD09GQ___006/MOD/MOD09GQ.A8722843.GTk5A3.006.4026909316904.jpeg"</span>,
                <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD09GQ.A8722843.GTk5A3.006.4026909316904"</span>
            }
        ],
        <span class="hljs-attr">"onlyInCmr"</span>: [
            {
                <span class="hljs-attr">"URL"</span>: <span class="hljs-string">"https://example.com/MYD13Q1.A2017297.h19v10.006.2017313221202.hdf"</span>,
                <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"GET DATA"</span>,
                <span class="hljs-attr">"GranuleUR"</span>: <span class="hljs-string">"MOD09GQ.A4675287.SWPE5_.006.7310007729190"</span>
            },
            {
                <span class="hljs-attr">"URL"</span>: <span class="hljs-string">"https://cumulus-test-sandbox-public.s3.amazonaws.com/MOD09GQ___006/MOD/MOD09GQ.A8722843.GTk5A3.006.4026909316904_ndvi.jpg"</span>,
                <span class="hljs-attr">"Type"</span>: <span class="hljs-string">"GET DATA"</span>,
                <span class="hljs-attr">"GranuleUR"</span>: <span class="hljs-string">"MOD09GQ.A8722843.GTk5A3.006.4026909316904"</span>
            }
        ]
    }
}</pre>
<h5 id="granule-not-found-report">Granule Not Found Report</h5>
<pre class='hljs'>{
  <span class="hljs-attr">"createStartTime"</span>: <span class="hljs-string">"2020-08-28T18:33:50.525Z"</span>,
  <span class="hljs-attr">"createEndTime"</span>: <span class="hljs-string">"2020-08-28T18:34:16.646Z"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>,
  <span class="hljs-attr">"reportType"</span>: <span class="hljs-string">"Granule Not Found"</span>,
  <span class="hljs-attr">"filesInCumulus"</span>: {
    <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">"okCountByGranule"</span>: {
      <span class="hljs-attr">"MOD09GQ.A2770300.W1_V5Z.006.7853319756315"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">"MOD09GQ.A7682091.QtZjhI.006.1218763030745"</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">"MOD09GQ.A9536857.bV1q4A.006.0980635705136"</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">"MOD09GQ.A7790080.xLPpTZ.006.2292724247258"</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">"MOD09GQ.A3769578.tlqq7j.006.4434181201872"</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">"MOD09GQ.A5423294.RFOrMI.006.8677601711674"</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">"MOD09GQ.A8837603.fb2Vhw.006.3950746589733"</span>: <span class="hljs-number">3</span>
    },
    <span class="hljs-attr">"onlyInS3"</span>: [
      <span class="hljs-string">"s3://cumulus-sandbox-private/MOD09GQ___006/MOD/test-data-1593122280799/MOD09GQ.A6921412.znLBqe.006.9673856807617.hdf.met"</span>,
      <span class="hljs-string">"s3://cumulus-sandbox-private/MOD09GQ___006/MOD/test-data-1593122597517/MOD09GQ.A1201557.d6tP2Y.006.7482431709753.hdf.met"</span>,
      <span class="hljs-string">"s3://cumulus-sandbox-private/MOD09GQ___006/MOD/test-data-1593198955197/MOD09GQ.A7375038.gm1irM.006.1317280710645.hdf.met"</span>,
      <span class="hljs-string">"s3://cumulus-sandbox-protected/MOD09GQ___006/2017/MOD/test-data-1593122280799/MOD09GQ.A6921412.znLBqe.006.9673856807617.hdf"</span>,
      <span class="hljs-string">"s3://cumulus-sandbox-protected/MOD09GQ___006/2017/MOD/test-data-1593122597517/MOD09GQ.A1201557.d6tP2Y.006.7482431709753.hdf"</span>,
      <span class="hljs-string">"s3://cumulus-sandbox-protected/MOD09GQ___006/2017/MOD/test-data-1593122881446/MOD09GQ.A2708681.CFkGhW.006.7154000014360.hdf"</span>
    ],
    <span class="hljs-attr">"onlyInDynamoDb"</span>: [
      {
        <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"s3://cumulus-sandbox-private/MOD09GQ___006/MOD/test-data-1593178175944/MOD09GQ.A2770300.W1_V5Z.006.7853319756315.hdf.met"</span>,
        <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD09GQ.A2770300.W1_V5Z.006.7853319756315"</span>
      }
    ]
  },
  <span class="hljs-attr">"collectionsInCumulusCmr"</span>: {
    <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"onlyInCumulus"</span>: [
      <span class="hljs-string">"MOD09GQ_test-test-data-1593122280799___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593122597517___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593122881446___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593178175944___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593198739991___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593198955197___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593199179316___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593199379860___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593199548454___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593199742089___006"</span>,
      <span class="hljs-string">"MOD09GQ_test-test-data-1593199934835___006"</span>
    ],
    <span class="hljs-attr">"onlyInCmr"</span>: [
      <span class="hljs-string">"A2_RainOcn_NRT___0"</span>,
      <span class="hljs-string">"A2_SI12_NRT___0"</span>,
      <span class="hljs-string">"A2_SI25_NRT___0"</span>,
      <span class="hljs-string">"A2_SI6_NRT___0"</span>,
      <span class="hljs-string">"AST_L1A___003"</span>,
      <span class="hljs-string">"CMR44JK___001"</span>,
      <span class="hljs-string">"L2_HR_PIXC___000"</span>,
      <span class="hljs-string">"L2_HR_PIXC___1"</span>,
      <span class="hljs-string">"MCD43A1___006"</span>,
      <span class="hljs-string">"MOD09GQ___006"</span>,
      <span class="hljs-string">"MOD11A1___006"</span>,
      <span class="hljs-string">"MOD14A1___006"</span>,
      <span class="hljs-string">"MUR-JPL-L4-GLOB-v4.1___1"</span>,
      <span class="hljs-string">"MYD09A1___006"</span>,
      <span class="hljs-string">"MYD13A1___006"</span>,
      <span class="hljs-string">"MYD13Q1___006"</span>,
      <span class="hljs-string">"hs3avaps___1"</span>,
      <span class="hljs-string">"hs3wwlln___1"</span>
    ]
  },
  <span class="hljs-attr">"granulesInCumulusCmr"</span>: {
    <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"onlyInCumulus"</span>: [],
    <span class="hljs-attr">"onlyInCmr"</span>: []
  },
  <span class="hljs-attr">"filesInCumulusCmr"</span>: {
    <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"onlyInCumulus"</span>: [],
    <span class="hljs-attr">"onlyInCmr"</span>: []
  }
}</pre>
<h5 id="internal-report">Internal Report</h5>
<pre class='hljs'>{
  <span class="hljs-attr">"reportType"</span>: <span class="hljs-string">"Internal"</span>,
  <span class="hljs-attr">"createStartTime"</span>: <span class="hljs-string">"2020-08-28T19:01:50.636Z"</span>,
  <span class="hljs-attr">"createEndTime"</span>: <span class="hljs-string">"2020-08-28T19:02:08.211Z"</span>,
  <span class="hljs-attr">"reportStartTime"</span>: <span class="hljs-string">"2020-01-28T18:21:31.119Z"</span>,
  <span class="hljs-attr">"reportEndTime"</span>: <span class="hljs-string">"2020-08-28T18:21:31.119Z"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>,
  <span class="hljs-attr">"collections"</span>: {
    <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">"withConflicts"</span>: [
      {
        <span class="hljs-attr">"es"</span>: {
          <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1591902043153</span>,
          <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^.*$"</span>,
          <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"L2_HR_PIXC_product_0001-of-4154.h5"</span>,
          <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"L2_HR_PIXC"</span>,
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"L2_HR_PIXC"</span>,
          <span class="hljs-attr">"files"</span>: [
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
              <span class="hljs-attr">"regex"</span>: <span class="hljs-string">".*.h5$"</span>,
              <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"L2_HR_PIXC_product_0001-of-4154.h5"</span>
            }
          ],
          <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"^(.*)(\\.h5|\\.cmr)"</span>,
          <span class="hljs-attr">"reportToEms"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"version"</span>: <span class="hljs-string">"000"</span>,
          <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"error"</span>,
          <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1591902043153</span>,
          <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1591902043840</span>
        },
        <span class="hljs-attr">"db"</span>: {
          <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"error"</span>,
          <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"^(.*)(\\.h5|\\.cmr)"</span>,
          <span class="hljs-attr">"version"</span>: <span class="hljs-string">"000"</span>,
          <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"L2_HR_PIXC"</span>,
          <span class="hljs-attr">"files"</span>: [
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
              <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"L2_HR_PIXC_product_0001-of-4154.h5"</span>,
              <span class="hljs-attr">"regex"</span>: <span class="hljs-string">".*.h5$"</span>
            }
          ],
          <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1591902043153</span>,
          <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1591902043153</span>,
          <span class="hljs-attr">"reportToEms"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^.*$"</span>,
          <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"L2_HR_PIXC_product_0001-of-4154.h5"</span>,
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"L2_HR_PIXC"</span>
        }
      }
    ],
    <span class="hljs-attr">"onlyInEs"</span>: [
      <span class="hljs-string">"MCD43A1___006"</span>,
      <span class="hljs-string">"MOD09GQ___006"</span>
    ],
    <span class="hljs-attr">"onlyInDb"</span>: [
      <span class="hljs-string">"MYD13QA___005"</span>
    ]
  },
  <span class="hljs-attr">"granules"</span>: {
    <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">77</span>,
    <span class="hljs-attr">"withConflicts"</span>: [
      {
        <span class="hljs-attr">"es"</span>: {
          <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:IngestAndPublishGranule:edb21d63-b62d-42e9-8879-f39d53314f16"</span>,
          <span class="hljs-attr">"processingEndDateTime"</span>: <span class="hljs-string">"2020-05-18T19:49:04.769Z"</span>,
          <span class="hljs-attr">"published"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"error"</span>: {},
          <span class="hljs-attr">"productVolume"</span>: <span class="hljs-number">253949</span>,
          <span class="hljs-attr">"timeToPreprocess"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"duration"</span>: <span class="hljs-number">1.005</span>,
          <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1589831343764</span>,
          <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD14A1.A4313371.RQSeyH.006.7795385650931"</span>,
          <span class="hljs-attr">"processingStartDateTime"</span>: <span class="hljs-string">"2020-05-18T19:49:03.831Z"</span>,
          <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
          <span class="hljs-attr">"timeToArchive"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"files"</span>: [
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-internal"</span>,
              <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf"</span>,
              <span class="hljs-attr">"size"</span>: <span class="hljs-number">233840</span>,
              <span class="hljs-attr">"source"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/test-data/files/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"data"</span>,
              <span class="hljs-attr">"key"</span>: <span class="hljs-string">"test-data/files/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf"</span>
            },
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-internal"</span>,
              <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf.met"</span>,
              <span class="hljs-attr">"size"</span>: <span class="hljs-number">14297</span>,
              <span class="hljs-attr">"source"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/test-data/files/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf.met"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"metadata"</span>,
              <span class="hljs-attr">"key"</span>: <span class="hljs-string">"test-data/files/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf.met"</span>
            },
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-internal"</span>,
              <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MOD14A1.A4313371.RQSeyH.006.7795385650931.1.jpg"</span>,
              <span class="hljs-attr">"size"</span>: <span class="hljs-number">5812</span>,
              <span class="hljs-attr">"source"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/test-data/files/BROWSE.MOD14A1.A4313371.RQSeyH.006.7795385650931.1.jpg"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"browse"</span>,
              <span class="hljs-attr">"key"</span>: <span class="hljs-string">"test-data/files/BROWSE.MOD14A1.A4313371.RQSeyH.006.7795385650931.1.jpg"</span>
            }
          ],
          <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD14A1___006"</span>,
          <span class="hljs-attr">"status"</span>: <span class="hljs-string">"running"</span>,
          <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1589831367756</span>,
          <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1589831344769</span>
        },
        <span class="hljs-attr">"db"</span>: {
          <span class="hljs-attr">"published"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"endingDateTime"</span>: <span class="hljs-string">"2017-11-08T23:59:59Z"</span>,
          <span class="hljs-attr">"status"</span>: <span class="hljs-string">"completed"</span>,
          <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1589831361039</span>,
          <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1589831343764</span>,
          <span class="hljs-attr">"processingEndDateTime"</span>: <span class="hljs-string">"2020-05-18T19:49:20.023Z"</span>,
          <span class="hljs-attr">"productVolume"</span>: <span class="hljs-number">258297</span>,
          <span class="hljs-attr">"timeToPreprocess"</span>: <span class="hljs-number">0.263</span>,
          <span class="hljs-attr">"timeToArchive"</span>: <span class="hljs-number">0.942</span>,
          <span class="hljs-attr">"productionDateTime"</span>: <span class="hljs-string">"2018-07-19T12:01:01Z"</span>,
          <span class="hljs-attr">"execution"</span>: <span class="hljs-string">"https://console.aws.amazon.com/states/home?region=us-east-1#/executions/details/arn:aws:states:us-east-1:123456789012:execution:IngestAndPublishGranule:edb21d63-b62d-42e9-8879-f39d53314f16"</span>,
          <span class="hljs-attr">"files"</span>: [
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-protected"</span>,
              <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD14A1___006/2017/MOD/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf"</span>,
              <span class="hljs-attr">"size"</span>: <span class="hljs-number">233840</span>,
              <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf"</span>,
              <span class="hljs-attr">"source"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/test-data/files/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"data"</span>
            },
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-private"</span>,
              <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD14A1___006/MOD/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf.met"</span>,
              <span class="hljs-attr">"size"</span>: <span class="hljs-number">14297</span>,
              <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf.met"</span>,
              <span class="hljs-attr">"source"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/test-data/files/MOD14A1.A4313371.RQSeyH.006.7795385650931.hdf.met"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"metadata"</span>
            },
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-public"</span>,
              <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD14A1___006/BRO/BROWSE.MOD14A1.A4313371.RQSeyH.006.7795385650931.1.jpg"</span>,
              <span class="hljs-attr">"size"</span>: <span class="hljs-number">5812</span>,
              <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MOD14A1.A4313371.RQSeyH.006.7795385650931.1.jpg"</span>,
              <span class="hljs-attr">"source"</span>: <span class="hljs-string">"s3://cumulus-test-sandbox-internal/test-data/files/BROWSE.MOD14A1.A4313371.RQSeyH.006.7795385650931.1.jpg"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"browse"</span>
            },
            {
              <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-protected-2"</span>,
              <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD14A1___006/MOD/MOD14A1.A4313371.RQSeyH.006.7795385650931.cmr.xml"</span>,
              <span class="hljs-attr">"size"</span>: <span class="hljs-number">4348</span>,
              <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD14A1.A4313371.RQSeyH.006.7795385650931.cmr.xml"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"metadata"</span>
            }
          ],
          <span class="hljs-attr">"cmrLink"</span>: <span class="hljs-string">"https://cmr.uat.earthdata.nasa.gov/search/granules.json?concept_id=G1234771093-CUMULUS"</span>,
          <span class="hljs-attr">"processingStartDateTime"</span>: <span class="hljs-string">"2020-05-18T19:49:03.831Z"</span>,
          <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1589831361039</span>,
          <span class="hljs-attr">"beginningDateTime"</span>: <span class="hljs-string">"2017-10-24T00:00:00Z"</span>,
          <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
          <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD14A1.A4313371.RQSeyH.006.7795385650931"</span>,
          <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD14A1___006"</span>,
          <span class="hljs-attr">"duration"</span>: <span class="hljs-number">17.275</span>,
          <span class="hljs-attr">"error"</span>: {
            <span class="hljs-attr">"Error"</span>: <span class="hljs-string">"Unknown Error"</span>,
            <span class="hljs-attr">"Cause"</span>: <span class="hljs-string">"None"</span>
          },
          <span class="hljs-attr">"lastUpdateDateTime"</span>: <span class="hljs-string">"2018-04-25T21:45:45.524053"</span>
        }
      }
    ],
    <span class="hljs-attr">"onlyInEs"</span>: [
      {
        <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MYD13Q1.A0323210.Yujnv6.006.1973526114346"</span>,
        <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MYD13Q1___006"</span>,
        <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1589913461833</span>,
        <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1589913522990</span>
      }
    ],
    <span class="hljs-attr">"onlyInDb"</span>: [
      {
        <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MYD13Q1.A5822875.qHI8hK.006.8698738069249"</span>,
        <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MYD13Q1___006"</span>,
        <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1598552797312</span>,
        <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1598552827611</span>
      }
    ]
  }
}</pre>
<h5 id="orca-backup-report">ORCA Backup Report</h5>
<pre class='hljs'>{
  <span class="hljs-attr">"collectionIds"</span>: [
    <span class="hljs-string">"MYD13Q1___006"</span>,
    <span class="hljs-string">"MOD09GQ___006"</span>
  ],
  <span class="hljs-attr">"createEndTime"</span>: <span class="hljs-string">"2022-02-11T19:13:41.986Z"</span>,
  <span class="hljs-attr">"createStartTime"</span>: <span class="hljs-string">"2022-02-11T19:13:41.153Z"</span>,
  <span class="hljs-attr">"granuleIds"</span>: [
    <span class="hljs-string">"MYD13Q1.A3194547.tnYsne.006.8400707913298"</span>,
    <span class="hljs-string">"MYD13Q1.A2655880.GOWVT9.006.3531712476486"</span>,
    <span class="hljs-string">"MOD09GQ.A8858216.Y6HJnu.006.6168319936421"</span>
  ],
  <span class="hljs-attr">"providers"</span>: [
    <span class="hljs-string">"modas_provider"</span>,
    <span class="hljs-string">"s3_provider"</span>
  ],
  <span class="hljs-attr">"reportEndTime"</span>: <span class="hljs-string">"2022-02-11T19:12:25.000Z"</span>,
  <span class="hljs-attr">"reportType"</span>: <span class="hljs-string">"ORCA Backup"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>,
  <span class="hljs-attr">"granules"</span>: {
    <span class="hljs-attr">"okCount"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"cumulusCount"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"orcaCount"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"okFilesCount"</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">"conflictFilesCount"</span>: <span class="hljs-number">6</span>,
    <span class="hljs-attr">"withConflicts"</span>: [
      {
        <span class="hljs-attr">"okFilesCount"</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MYD13Q1.A3194547.tnYsne.006.8400707913298"</span>,
        <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MYD13Q1___006"</span>,
        <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1644606673827</span>,
        <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1644606718024</span>,
        <span class="hljs-attr">"conflictFiles"</span>: [
          {
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MYD13Q1.A3194547.tnYsne.006.8400707913298.cmr.xml"</span>,
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-protected-2"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MYD13Q1___006/MYD/MYD13Q1.A3194547.tnYsne.006.8400707913298.cmr.xml"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"shouldBeExcludedFromOrca"</span>
          },
          {
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MYD13Q1.A3194547.tnYsne.006.8400707913298.1.jpg2"</span>,
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-public"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MYD13Q1___006/BRO/BROWSE.MYD13Q1.A3194547.tnYsne.006.8400707913298.1.jpg2"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInCumulus"</span>
          },
          {
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MYD13Q1.A3194547.tnYsne.006.8400707913298.1.jpg"</span>,
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-public"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MYD13Q1___006/BRO/BROWSE.MYD13Q1.A3194547.tnYsne.006.8400707913298.1.jpg"</span>,
            <span class="hljs-attr">"orcaBucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-orca-glacier"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInOrca"</span>
          }
        ]
      }
    ],
    <span class="hljs-attr">"onlyInCumulus"</span>: [
      {
        <span class="hljs-attr">"okFilesCount"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MYD13Q1.A2655880.GOWVT9.006.3531712476486"</span>,
        <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MYD13Q1___006"</span>,
        <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1644606673656</span>,
        <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1644606683360</span>,
        <span class="hljs-attr">"conflictFiles"</span>: [
          {
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MYD13Q1.A2655880.GOWVT9.006.3531712476486.hdf"</span>,
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-protected"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MYD13Q1___006/2017/MYD/MYD13Q1.A2655880.GOWVT9.006.3531712476486.hdf"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInCumulus"</span>
          },
          {
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MYD13Q1.A2655880.GOWVT9.006.3531712476486.hdf"</span>,
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-private"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MYD13Q1___006/BRO/BROWSE.MYD13Q1.A2655880.GOWVT9.006.3531712476486.hdf"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInCumulus"</span>
          },
          {
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"BROWSE.MYD13Q1.A2655880.GOWVT9.006.3531712476486.1.jpg"</span>,
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-public"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MYD13Q1___006/BRO/BROWSE.MYD13Q1.A2655880.GOWVT9.006.3531712476486.1.jpg"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInCumulus"</span>
          },
          {
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MYD13Q1.A2655880.GOWVT9.006.3531712476486.cmr.xml"</span>,
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-protected-2"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MYD13Q1___006/MYD/MYD13Q1.A2655880.GOWVT9.006.3531712476486.cmr.xml"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInCumulus"</span>
          }
        ]
      }
    ],
    <span class="hljs-attr">"onlyInOrca"</span>: [
      {
        <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"MOD09GQ.A8858216.Y6HJnu.006.6168319936421"</span>,
        <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
        <span class="hljs-attr">"collectionId"</span>: <span class="hljs-string">"MOD09GQ___006"</span>,
        <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1643920768281</span>,
        <span class="hljs-attr">"conflictFiles"</span>: [
          {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-protected"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD09GQ___006/2017/MOD/MOD09GQ.A8858216.Y6HJnu.006.6168319936421.hdf"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD09GQ.A8858216.Y6HJnu.006.6168319936421.hdf"</span>,
            <span class="hljs-attr">"orcaBucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-orca-glacier"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInOrca"</span>
          },
          {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-public"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD09GQ___006/MOD/MOD09GQ.A8858216.Y6HJnu.006.6168319936421_ndvi.jpg"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD09GQ.A8858216.Y6HJnu.006.6168319936421_ndvi.jpg"</span>,
            <span class="hljs-attr">"orcaBucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-orca-glacier"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInOrca"</span>
          },
          {
            <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-protected-2"</span>,
            <span class="hljs-attr">"key"</span>: <span class="hljs-string">"MOD09GQ___006/MOD/MOD09GQ.A8858216.Y6HJnu.006.6168319936421.cmr.xml"</span>,
            <span class="hljs-attr">"fileName"</span>: <span class="hljs-string">"MOD09GQ.A8858216.Y6HJnu.006.6168319936421.cmr.xml"</span>,
            <span class="hljs-attr">"orcaBucket"</span>: <span class="hljs-string">"cumulus-test-sandbox-orca-glacier"</span>,
            <span class="hljs-attr">"reason"</span>: <span class="hljs-string">"onlyInOrca"</span>
          }
        ]
      }
    ]
  }
}</pre>
<h5 id="granule-inventory-report">Granule Inventory Report</h5>
<pre class='hljs'>"granuleUr","collectionId","createdAt","startDateTime","endDateTime","status","updatedAt","published"
"MOD14A1.A9506271.IvEJsu.006.8359924290786","MOD14A1___006","2020-05-18T20:15:54.525Z","2017-10-24T00:00:00Z","2017-11-08T23:59:59Z","completed","2020-05-18T20:16:02.473Z",false
"MYD13Q1.A9663671.0zkwKH.006.9812354158395","MYD13Q1___006","2020-07-06T19:46:19.957Z","2017-10-24T00:00:00Z","2017-11-08T23:59:59Z","completed","2020-07-06T19:46:57.054Z",true</pre>
</div></div><div data-title="Create reconciliation report" class="keyline-top section contain clearfix " data-reactid="293"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="294"><h2 id="create-reconciliation-report">Create reconciliation report</h2>
<p>Create a new reconciliation report.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="295"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/reconciliationReports</div>
    </div>
</div></div><div data-title="Request body" class="keyline-top section contain clearfix " data-reactid="296"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="297"><h3 id="request-body-1">Request body</h3>
<table>
<thead>
<tr>
<th>parameter</th>
<th>value</th>
<th>required</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reportName</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>Report name.</td>
</tr>
<tr>
<td><code>reportType</code></td>
<td><code>"Granule Inventory"</code>|<code>"Granule Not Found"</code>|<code>"Internal"</code>|<code>"Inventory"</code>|<code>"ORCA Backup"</code></td>
<td><code>false</code></td>
<td>Report type (default Inventory)</td>
</tr>
<tr>
<td><code>startTimestamp</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>Any input valid for a JS Date contstructor. Data older than this will be ignored in the generated report.</td>
</tr>
<tr>
<td><code>endTimestamp</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>Any input valid for a JS Date contstructor. Data newer than this will be ignored in the generated report.</td>
</tr>
<tr>
<td><code>collectionId</code></td>
<td>[<code>string | array</code>]</td>
<td><code>false</code></td>
<td>collectionId (or array of collectionIds) for comparison of collection and granule holdings.</td>
</tr>
<tr>
<td><code>granuleId</code></td>
<td>[<code>string | array</code>]</td>
<td><code>false</code></td>
<td>granuleId (or array of granuleIds) for use for comparison of collection and granule holdings.</td>
</tr>
<tr>
<td><code>provider</code></td>
<td>[<code>string | array</code>]</td>
<td><code>false</code></td>
<td>provider name (or array of providers) for comparison of granule holdings</td>
</tr>
<tr>
<td><code>status</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>status filter for Granule Inventory reports</td>
</tr>
</tbody>
</table>
<p><em>NOTE</em>: Adding a startTimestamp or endTimestamp value to the POST request will result in one way comparisons for some fields for <code>Inventory</code> and <code>Granule Not Found</code> reports.</p>
<p><em>NOTE</em>: Adding a granuleId input will result in an one way report for collections for <code>Inventory</code> and <code>Granule Not Found</code> reports.</p>
<p><em>NOTE</em>: <code>Inventory</code> and <code>Granule Not Found</code> reports only allow one of the parameters (<code>collectionId</code>, <code>granuleId</code>, <code>provider</code>) in same request.</p>
<p><em>NOTE</em>: <code>Granule Inventory</code> reports can be filtered with the following parameters: (<code>collectionId</code>, <code>granuleId</code>, <code>status</code>). If <code>granuleId</code> is a string or single value array, it will search for granules with granuleIds containing that substring.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="298"><h4 id="example-request-53">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/reconciliationReports --header <span class="hljs-string">'Authorization: Bearer ReplaceWithToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
  "reportName": "ModisInventoryReport",
  "reportType": "Inventory",
  "startTimestamp": 1269993600000,
  "endTimestamp": 1350000000000,
  "collectionId": "MOD09GQ___006",
  "provider": "MODIS",
  "granuleId": "MOD09GQ.A2016358.h13v04.006.2016360104606"
}'</span></pre>
<h4 id="example-response-53">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"bb7059f4-0cd8-4205-8857-fb0e6b68b3e4"</span>
}</pre>
</div></div><div data-title="Delete reconciliation report" class="keyline-top section contain clearfix " data-reactid="299"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="300"><h2 id="delete-reconciliation-report">Delete reconciliation report</h2>
<p>Delete a reconciliation report from Cumulus.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="301"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>DELETE</div>
      <div class='pad0 code small endpoint-url'>/reconciliationReports/<span class="strong">{name}</span></div>
    </div>
<h4 id="example-request-54">Example request</h4>
<pre class='hljs'>$ curl --request DELETE https://example.com/reconciliationReports/inventoryReport-20180620T205838883 --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-54">Example response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Report deleted"</span>
}</pre>
</div></div><div data-title="Create EMS reports" class="keyline-top section contain clearfix " data-reactid="302"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="303"><h2 id="create-ems-reports">Create EMS reports</h2>
<p>Create EMS reports and send them to EMS. For more information on EMS reporting and types of reports see <a href="https://nasa.github.io/cumulus/docs/next/ems_reporting">the Cumulus EMS Reporting documentation</a>.</p>
<p>Overview of the request fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reportType</code></td>
<td><code>Y</code></td>
<td><code>"metadata"</code>|<code>"ingest"</code>|<code>"distribution"</code></td>
<td>type of report</td>
</tr>
<tr>
<td><code>startTime</code></td>
<td><code>N</code></td>
<td><code>string</code></td>
<td>report startTime in format YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss <br>If startTime and endTime are not specified, the reports for previous day will be generated</td>
</tr>
<tr>
<td><code>endTime</code></td>
<td><code>N</code></td>
<td><code>string</code></td>
<td>report endTime in format YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss</td>
</tr>
<tr>
<td><code>collectionId</code></td>
<td><code>N</code></td>
<td><code>string</code></td>
<td>collectionId of the report records <br>This field can be specified when report type is <code>metadata</code> or <code>ingest</code></td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="304"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/ems</div>
    </div>
<h4 id="example-requests">Example requests</h4>
<pre class='hljs'>$ curl https://example.com/ems --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --data <span class="hljs-string">'{
    "reportType": "metadata"
}'</span></pre>
<pre class='hljs'>$ curl https://example.com/ems --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --data <span class="hljs-string">'{
    "reportType": "ingest",
    "startTime": "2019-06-27",
    "endTime": "2019-06-29",
    "collectionId": "MOD14A1___006"
}'</span></pre>
<h4 id="example-response-55">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Reports are being generated"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-number">202</span>
}</pre>
</div></div><div data-title="Instance Metadata" class="keyline-top section contain clearfix " data-reactid="305"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="306"><h2 id="instance-metadata-1">Instance Metadata</h2>
<p>The Cumulus API can provide information about its configuration.</p>
<p>GET requests to the instance metadata endpoint return a json object with information about how the Cumulus stack is configured. It returns the CMR provider and environment as well as the stackName (prefix).</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="307"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/instanceMeta</div>
    </div>
<h4 id="example-request-55">Example Request</h4>
<pre class='hljs'>$ curl https://example.com/instanceMeta --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-56">Example Response</h4>
<pre class='hljs'>{
  <span class="hljs-attr">"cmr"</span>: {
    <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"CUMULUS"</span>,
    <span class="hljs-attr">"environment"</span>: <span class="hljs-string">"UAT"</span>
  },
  <span class="hljs-attr">"cumulus"</span>: {
    <span class="hljs-attr">"stackName"</span>: <span class="hljs-string">"cumulus-stack-prefix"</span>
  }
}</pre>
</div></div><div data-title="Elasticsearch" class="keyline-top section contain clearfix " data-reactid="308"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="309"><h2 id="elasticsearch-1">Elasticsearch</h2>
<p>These endpoints provide an interface into the Elasticsearch SDK to perform functions like Elasticsearch reindex.</p>
<p>Cumulus uses <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-aliases.html">index aliases</a> to allow reindexing with no downtime.</p>
</div></div><div data-title="Reindex" class="keyline-top section contain clearfix " data-reactid="310"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="311"><h2 id="reindex">Reindex</h2>
<p>The reindex command creates a new index and reindexes the source index to the new, destination index. This uses the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.3/docs-reindex.html">Elasticsearch reindex functionality</a>, but includes setting up the new index.</p>
<p>Note that there will now be two copies of your index. Your Cumulus instance will still point to the old copy until you perform the <code>change-index</code> function described below.</p>
<p>An alias should not be specified unless you have a specific alias configured. If a source index is not specified, it will default to the index from the alias. If you want to name the destination index something particular, you can specify a name, otherwise the destination index name will default to 'cumulus-year-month-day' with today's date (e.g. <code>cumulus-4-12-2019</code>). If you specify a destination index name, it must be an index that does not already exist in your cluster.  The destination index must be different than the source index or the operation will fail.</p>
<p>Since reindex can be a long running operation, the <code>reindex-status</code> endpoint must be queried to see if the operation has completed.</p>
<p>Overview of request fields:</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>value</th>
<th>required</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>aliasName</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>Alias to reindex from. Will be used if <code>sourceIndex</code> is not provided. Will default to the default alias if not provided.</td>
</tr>
<tr>
<td><code>sourceIndex</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>Index to reindex from</td>
</tr>
<tr>
<td><code>destIndex</code></td>
<td><code>string</code></td>
<td><code>true</code></td>
<td>Index to reindex to</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="312"><h4 id="example-request-56">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/elasticsearch/reindex --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-57">Example response</h4>
<pre class='hljs'>{ <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Reindexing from cumulus-4-4-2019 to cumulus-4-12-2019. Check the reindex-status endpoint for status."</span> }</pre>
<h4 id="example-request-57">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/elasticsearch/reindex --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
  "aliasName": "cumulus-alias",
  "sourceIndex": "cumulus-4-4-2019",
  "destIndex": "cumulus-new-index"
}'</span></pre>
<h4 id="example-response-58">Example response</h4>
<pre class='hljs'>{ <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Reindexing from cumulus-4-4-2019 to cumulus-new-index. Check the reindex-status endpoint for status."</span> }</pre>
</div></div><div data-title="Reindex Status" class="keyline-top section contain clearfix " data-reactid="313"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="314"><h2 id="reindex-status">Reindex Status</h2>
<p>Reindexing can be a long running operation, so use this endpoint to get the status of your reindex and the status of your indices.</p>
<p><code>reindexStatus.nodes</code> will be populated if there is a reindex operation currently running, <code>nodes</code> will be empty if not.</p>
<p>The <code>elasticsearchStatus</code> shows the number of documents in each index which can be used as a sanity check for the reindex operation before switching over to the new index. Note that the active index will continue to index logs, so the number of documents in the active index will be slightly higher and continue to grow.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="315"><h4 id="example-request-58">Example request</h4>
<pre class='hljs'>$ curl https://example.com/elasticsearch/reindex-status --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-responses-1">Example responses</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"reindexStatus"</span>: {
        <span class="hljs-attr">"nodes"</span>: {
            <span class="hljs-attr">"TKDzeZ_TQVWkwKZYtCtv_g"</span>: {
                <span class="hljs-attr">"name"</span>: <span class="hljs-string">"TKDzeZ_"</span>,
                <span class="hljs-attr">"roles"</span>: [
                    <span class="hljs-string">"master"</span>,
                    <span class="hljs-string">"data"</span>,
                    <span class="hljs-string">"ingest"</span>
                ],
                <span class="hljs-attr">"tasks"</span>: {
                    <span class="hljs-attr">"TKDzeZ_TQVWkwKZYtCtv_g:546691"</span>: {
                        <span class="hljs-attr">"node"</span>: <span class="hljs-string">"TKDzeZ_TQVWkwKZYtCtv_g"</span>,
                        <span class="hljs-attr">"id"</span>: <span class="hljs-number">546691</span>,
                        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"transport"</span>,
                        <span class="hljs-attr">"action"</span>: <span class="hljs-string">"indices:data/write/reindex"</span>,
                        <span class="hljs-attr">"start_time_in_millis"</span>: <span class="hljs-number">1555073365557</span>,
                        <span class="hljs-attr">"running_time_in_nanos"</span>: <span class="hljs-number">75424890</span>,
                        <span class="hljs-attr">"cancellable"</span>: <span class="hljs-literal">true</span>
                    }
                }
            }
        }
    },
    <span class="hljs-attr">"indexStatus"</span>: {
        <span class="hljs-attr">"_shards"</span>: {
            <span class="hljs-attr">"total"</span>: <span class="hljs-number">32</span>,
            <span class="hljs-attr">"successful"</span>: <span class="hljs-number">16</span>,
            <span class="hljs-attr">"failed"</span>: <span class="hljs-number">0</span>
        },
        <span class="hljs-attr">"_all"</span>: {
            <span class="hljs-attr">"primaries"</span>: {
                <span class="hljs-attr">"docs"</span>: {
                    <span class="hljs-attr">"count"</span>: <span class="hljs-number">52213</span>,
                    <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                }
            },
            <span class="hljs-attr">"total"</span>: {
                <span class="hljs-attr">"docs"</span>: {
                    <span class="hljs-attr">"count"</span>: <span class="hljs-number">52213</span>,
                    <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                }
            }
        },
        <span class="hljs-attr">"indices"</span>: {
            <span class="hljs-attr">".kibana"</span>: {
                <span class="hljs-attr">"primaries"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">1</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                },
                <span class="hljs-attr">"total"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">1</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                }
            },
            <span class="hljs-attr">"cumulus-2019-4-12"</span>: {
                <span class="hljs-attr">"primaries"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25569</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                },
                <span class="hljs-attr">"total"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25569</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                }
            },
            <span class="hljs-attr">"cumulus-2019-4-9"</span>: {
                <span class="hljs-attr">"primaries"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25644</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                },
                <span class="hljs-attr">"total"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25644</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                }
            }
        }
    }
}</pre>
<pre class='hljs'>{
    <span class="hljs-attr">"reindexStatus"</span>: {
        <span class="hljs-attr">"nodes"</span>: {}
    },
    <span class="hljs-attr">"indexStatus"</span>: {
        <span class="hljs-attr">"_shards"</span>: {
            <span class="hljs-attr">"total"</span>: <span class="hljs-number">22</span>,
            <span class="hljs-attr">"successful"</span>: <span class="hljs-number">11</span>,
            <span class="hljs-attr">"failed"</span>: <span class="hljs-number">0</span>
        },
        <span class="hljs-attr">"_all"</span>: {
            <span class="hljs-attr">"primaries"</span>: {
                <span class="hljs-attr">"docs"</span>: {
                    <span class="hljs-attr">"count"</span>: <span class="hljs-number">51210</span>,
                    <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                }
            },
            <span class="hljs-attr">"total"</span>: {
                <span class="hljs-attr">"docs"</span>: {
                    <span class="hljs-attr">"count"</span>: <span class="hljs-number">51210</span>,
                    <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                }
            }
        },
        <span class="hljs-attr">"indices"</span>: {
            <span class="hljs-attr">".kibana"</span>: {
                <span class="hljs-attr">"primaries"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">1</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                },
                <span class="hljs-attr">"total"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">1</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                }
            },
            <span class="hljs-attr">"cumulus-2019-4-12"</span>: {
                <span class="hljs-attr">"primaries"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25569</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                },
                <span class="hljs-attr">"total"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25569</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                }
            },
            <span class="hljs-attr">"cumulus-2019-4-9"</span>: {
                <span class="hljs-attr">"primaries"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25640</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                },
                <span class="hljs-attr">"total"</span>: {
                    <span class="hljs-attr">"docs"</span>: {
                        <span class="hljs-attr">"count"</span>: <span class="hljs-number">25640</span>,
                        <span class="hljs-attr">"deleted"</span>: <span class="hljs-number">0</span>
                    }
                }
            }
        }
    }
}</pre>
</div></div><div data-title="Change Index" class="keyline-top section contain clearfix " data-reactid="316"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="317"><h2 id="change-index">Change Index</h2>
<p>Change index switches the Elasticsearch index to point to the new index, rather than the current index. You may choose to delete your current index during this operation using the <code>deleteSource</code> parameter, which defaults to <code>false</code>. If you are using the default index created by Cumulus, this will switch your Cumulus instance to the new index and you will see those changes immediately via the API and dashboard. If <code>newIndex</code> does not exist, an index with that name will be created.</p>
<p><code>currentIndex</code> and <code>newIndex</code> are required parameters.</p>
<p>In the context of reindex, you'd call <code>change-index</code>, following reindex completion to start using the new index with no downtime.</p>
<p>Overview of the request fields:</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>value</th>
<th>required</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>aliasName</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>Alias to use for <code>newIndex</code>. Will be the default index if not provided</td>
</tr>
<tr>
<td><code>currentIndex</code></td>
<td><code>string</code></td>
<td><code>true</code></td>
<td>Index to change the alias from</td>
</tr>
<tr>
<td><code>newIndex</code></td>
<td><code>string</code></td>
<td><code>true</code></td>
<td>Index to change alias to</td>
</tr>
<tr>
<td><code>deleteSource</code></td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>If set to <code>true</code> it will delete the index provided in <code>currentIndex</code></td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="318"><h4 id="example-request-59">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/elasticsearch/change-index --header <span class="hljs-string">'Content-Type: application/json'</span> --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --data <span class="hljs-string">'{
  "aliasName": "cumulus-alias",
  "currentIndex": "cumulus-12-4-2019",
  "newIndex": "cumulus-4-12-2019",
  "deleteSource": false
}'</span></pre>
<h4 id="example-response-59">Example response</h4>
<pre class='hljs'>{ <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Reindex success - alias cumulus now pointing to cumulus-4-12-2019"</span> }</pre>
</div></div><div data-title="Index from Database" class="keyline-top section contain clearfix " data-reactid="319"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="320"><h2 id="index-from-database">Index from Database</h2>
<p>In case of corruption of your Elasticsearch index, you can reindex your data from the database. This will include collections, executions, granules, pdrs, providers, and rules. Logs will not be indexed since they are not stored in the database.</p>
<p>You can specify an index (should be empty) or if no index name is specified, a default with the format of 'cumulus-year-month-day' with today's date (e.g. <code>cumulus-4-12-2019</code>) will be used. If the specified index does not exist, it will be created.</p>
<p>You may optionally specify the following request fields:</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>value</th>
<th>required</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>postgresResultPageSize</code></td>
<td><code>number</code></td>
<td><code>false</code></td>
<td>Number of records to pull per database query for index to Elasticsearch   Defaults 1000</td>
</tr>
<tr>
<td><code>postgresConnectionPoolSize</code></td>
<td><code>number</code></td>
<td><code>false</code></td>
<td>Max number of connections to postgres database to allocate.   Defaults to 10</td>
</tr>
<tr>
<td><code>esRequestConcurrency</code></td>
<td><code>number</code></td>
<td><code>false</code></td>
<td>Maximum concurrency of writes to Elasticsearch Defaults to 10</td>
</tr>
<tr>
<td><code>indexName</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
<td>Name of index to re-index to.   Defaults to <code>cumulus-dd-mm-yyyy</code></td>
</tr>
</tbody>
</table>
<p>It is recommended that workflow rules be turned off, as any data ingested into the database during this operation cannot be guaranteed to make it into the new index. Following the completion of the index, you will need to use the change index operation to switch your Elasticsearch to point to the new instance.</p>
<p>Indexing is an async operation, so an operation id will be returned. You can query the status using the <code>asyncoperations</code> GET endpoint with the operation id.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="321"><h4 id="example-request-60">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/elasticsearch/index-from-database --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
  "indexName": "recovery-index"
}'</span></pre>
<h4 id="example-response-60">Example response</h4>
<pre class='hljs'>{<span class="hljs-attr">"message"</span>:<span class="hljs-string">"Indexing database to recovery-index. Operation id: 8f4d35ba-c858-40ae-93f0-4465f54a911d"</span>}</pre>
<h4 id="example-request---operation-status">Example request - operation status</h4>
<pre class='hljs'>$ curl --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> https://example.com/asyncoperations/8f4d35ba-c858-40ae-93f0-4465f54a911d</pre>
<h4 id="example-response---operation-status">Example response - operation status</h4>
<pre class='hljs'>{
   <span class="hljs-attr">"id"</span>:<span class="hljs-string">"8f4d35ba-c858-40ae-93f0-4465f54a911d"</span>,
   <span class="hljs-attr">"status"</span>:<span class="hljs-string">"SUCCEEDED"</span>,
   <span class="hljs-attr">"taskArn"</span>:<span class="hljs-string">"arn:aws:ecs:us-east-1:XXXXXXXXXXXX:task/dc41ff2b-e610-4f7a-8c63-48b48ceb7160"</span>,
   <span class="hljs-attr">"output"</span>:<span class="hljs-string">"\"Index from database complete\""</span>
}</pre>
</div></div><div data-title="Indices Status" class="keyline-top section contain clearfix " data-reactid="322"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="323"><h2 id="indices-status">Indices Status</h2>
<p>Use the indices-status endpoint to view information about your elasticsearch indices. This endpoint will return the information for the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.x/cat-indices.html">indices call</a> in the Elasticsearch API.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="324"><h4 id="example-request-61">Example request</h4>
<pre class='hljs'>$ curl  https://example.com/elasticsearch/indices-status --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-61">Example response</h4>
<pre class='hljs'>yellow open .kibana           yxBUTswHSr2ecec8y1szEg 1 1      1   0   3.1kb   3.1kb
yellow open cumulus-2019-6-21 ELpdxYVKSc-VvNxlNjmMUA 5 1    700 225   2.5mb   2.5mb
yellow open cumulus-2019-6-24 lmylLkTsQJWIVYFJcftMqQ 5 1    700   0     4mb     4mb
yellow open cumulus           jQLXsb8yS4aEmLAAyHcmCw 5 1 217298 588 124.3mb 124.3mb</pre>
</div></div><div data-title="Current Index" class="keyline-top section contain clearfix " data-reactid="325"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="326"><h2 id="current-index">Current Index</h2>
<p>Get the current aliased index being used by the Cumulus Elasticsearch instance.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="327"><h4 id="example-request-62">Example request</h4>
<pre class='hljs'>$ curl  https://example.com/elasticsearch/current-index --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span></pre>
<h4 id="example-response-62">Example response</h4>
<pre class='hljs'>[<span class="hljs-string">"cumulus-2019-6-24"</span>]</pre>
</div></div><div data-title="Serve the dashboard from a bucket" class="keyline-top section contain clearfix " data-reactid="328"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="329"><h2 id="serve-the-dashboard-from-a-bucket">Serve the dashboard from a bucket</h2>
<p>Serve the dashboard from an S3 bucket.</p>
<p>This is a way to serve the Cumulus dashboard in a browser from an S3 bucket without making the bucket or files public.</p>
<p>To use this:</p>
<ul>
<li>Your dashboard bucket must be in the bucket definitions in your Cumulus <code>terraform.tfvars</code>, otherwise you will not be able to access the bucket.</li>
<li>Deploy the dashboard to your bucket using the instructions in the Cumulus dashboard README.</li>
<li>In a browser, use the example request below, but replace <code>example.com</code> with your Cumulus backend API and <code>dashboard-bucket</code> with your bucket name.</li>
</ul>
<pre><code>https://example.com/dashboard/dashboard-bucket/index.html
</code></pre>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="330"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>GET</div>
      <div class='pad0 code small endpoint-url'>/dashboard/<span class="strong">{bucket}</span>/<span class="strong">{key}</span></div>
    </div>
<h4 id="example-request-63">Example request</h4>
</div></div><div data-title="ORCA" class="keyline-top section contain clearfix " data-reactid="331"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="332"><h2 id="orca-1">ORCA</h2>
<p>This endpoint authenticates and forwards requests to the ORCA private API, and returns the response from the ORCA API.  Please refer to <a href="https://nasa.github.io/cumulus-orca/docs/developer/api/orca-api">ORCA API reference</a> on how to use ORCA API.</p>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="333"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/orca</div>
    </div>
<h4 id="example-request-64">Example request</h4>
<pre class='hljs'>$ curl --request POST https://example.com/orca/recovery/granules --header <span class="hljs-string">'Authorization: Bearer ReplaceWithTheToken'</span> --header <span class="hljs-string">'Content-Type: application/json'</span>  --data <span class="hljs-string">'{
  "granuleId": "MOD14A1.061.H5V12.2020312.141531789"
}'</span></pre>
</div></div><div data-title="Migration Counts" class="keyline-top section contain clearfix " data-reactid="334"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="335"><h2 id="migration-counts">Migration Counts</h2>
<p>This endpoint triggers a run of the postgres-migration-count-tool as an async operation of type <code>Migration Count Report</code>.</p>
<p>For more information on the tool, see the <a href="https://github.com/nasa/cumulus/blob/master/lambdas/postgres-migration-count-tool/README.md">README</a></p>
<p>The query uses the following optional parameters:</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cutoffSeconds</td>
<td>Sets the number of seconds prior to this execution to 'cutoff' reconciliation queries.  This allows in-progress or other in-flight operations time to complete and propagate to ElasticSearch/Dynamo/Postgres.  Default is 3600</td>
</tr>
<tr>
<td>dbConcurrency</td>
<td>Sets max number of parallel collections reports  the script will run at a time.  Default 20</td>
</tr>
<tr>
<td>dbMaxPool</td>
<td>Sets the maximum number of connections the database pool has available.   Modifying this may result in unexpected failures.    Default is 20</td>
</tr>
<tr>
<td>reportPath</td>
<td>Sets the path location for the tool to write a copy of the lambda payload to S3</td>
</tr>
<tr>
<td>reportBucket</td>
<td>Sets the bucket used for reporting.  If this argument is used, a <code>reportPath</code> must be set to generate a report</td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="336"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/migrationCounts</div>
    </div>
<h4 id="example-request-65">Example request</h4>
<pre class='hljs'><span class="hljs-variable">$curl</span> -X POST https://<span class="hljs-variable">$API_URL</span>/dev/migrationCounts -d <span class="hljs-string">'reportBucket=someBucket&amp;reportPath=someReportPath&amp;cutoffSeconds=60&amp;dbConcurrency=20&amp;dbMaxPool=20'</span> --header <span class="hljs-string">'Authorization: Bearer $TOKEN'</span></pre>
<h4 id="example-response-63">Example response</h4>
<pre class='hljs'>{<span class="hljs-attr">"id"</span>:<span class="hljs-string">"7ccaed31-756b-40bb-855d-e5e6d00dc4b3"</span>,<span class="hljs-attr">"status"</span>:<span class="hljs-string">"RUNNING"</span>,<span class="hljs-attr">"taskArn"</span>:<span class="hljs-string">"arn:aws:ecs:us-east-1:AWSID:task/$PREFIX-CumulusECSCluster/123456789"</span>,<span class="hljs-attr">"description"</span>:<span class="hljs-string">"Migration Count Tool ECS Run"</span>,<span class="hljs-attr">"operationType"</span>:<span class="hljs-string">"Migration Count Report"</span>}</pre>
</div></div><div data-title="Recover cumulus messages" class="keyline-top section contain clearfix " data-reactid="337"><div class="space-bottom8 col6 pad2x prose clip" data-reactid="338"><h2 id="recover-cumulus-messages">Recover cumulus messages</h2>
<p>Endpoint provides a mechanism for recovery of S3 sfEventSqsToDbRecords dead letter objects (created as described in the <a href="https://nasa.github.io/cumulus/docs/features/dead_letter_archive">Core Documentation</a>). The endpoint will invoke an async operation that will attempt to process all of the objects in the specified location.</p>
<p>The endpoint by default will process all records contained in the S3 objects from the default storage location on the S3 system bucket under the prefix of <code>&#x3C;stackName>/dead-letter-archive/sqs/</code>. However, it is likely useful to process a subset of those objects, which you can do by moving the desired subset of objects to a new path on S3 and then specifying that new path using the <code>path</code> parameter to the endpoint request.</p>
<p>The query uses the following optional parameters:</p>
<table>
<thead>
<tr>
<th>parameter</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bucket</td>
<td>The bucket to read records from. Defaults to the Core system bucket</td>
</tr>
<tr>
<td>path</td>
<td>The S3 prefix (path) to read DLQ records from. Defaults to <code>&#x3C;stackName>/dead-letter-archive/sqs/</code></td>
</tr>
</tbody>
</table>
</div><div class="space-bottom4 col6 pad2 prose clip fill-light space-top5" data-reactid="339"><div class='endpoint dark fill-dark round '>
      <div class='round-left pad0y pad1x fill-lighten0 code small endpoint-method'>POST</div>
      <div class='pad0 code small endpoint-url'>/deadLetterArchive/recoverCumulusMessages</div>
    </div>
<h4 id="example-request-66">Example request</h4>
<pre class='hljs'>curl -X POST https://cumulus.podaac.sit.earthdata.nasa.gov/deadLetterArchive/recoverCumulusMessages --header <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$TOKEN</span>"</span> --header <span class="hljs-string">'Content-Type: application/json'</span> --data <span class="hljs-string">'{
    "bucket": "some-cumulus-bucket",
    "path": "some/path/to/records/"
}'</span></pre>
<h4 id="example-response-64">Example response</h4>
<pre class='hljs'>{
    <span class="hljs-attr">"createdAt"</span>:<span class="hljs-number">1646861517957</span>,
    <span class="hljs-attr">"updatedAt"</span>:<span class="hljs-number">1646861517957</span>,
    <span class="hljs-attr">"id"</span>:<span class="hljs-string">"a0cd2cf0-a677-e82a-27d1-0a09271aa37d"</span>,
    <span class="hljs-attr">"status"</span>:<span class="hljs-string">"RUNNING"</span>,
    <span class="hljs-attr">"taskArn"</span>:<span class="hljs-string">"arn:aws:ecs:us-west-2:xxxxxxxxxx:task/stack-CumulusECSCluster/{SHA}"</span>,
    <span class="hljs-attr">"description"</span>:<span class="hljs-string">"Dead-Letter Processor ECS Run"</span>,
    <span class="hljs-attr">"operationType"</span>:<span class="hljs-string">"Dead-Letter Processing"</span> 
}</pre>
</div></div></div></div></div><div class="fixed-top space-left16" data-reactid="340"><div class="events fill-light bottom-shadow pad1 col6 pin-topright  " data-reactid="341"><div class="space-right1 small quiet inline" data-reactid="342">Show examples in:</div><div class="rounded-toggle inline short" data-reactid="343"><a class="strong active" data-reactid="344">cURL</a><a class="strong " data-reactid="345">Python</a><a class="strong " data-reactid="346">JS</a></div><div class="fr pad0" data-reactid="347"><a title="Display as 1 column" style="cursor:pointer;" class="icon quiet caret-left pad0 fill-darken0 round" data-reactid="348"></a></div></div></div><div class="fill-dark dark bottom-shadow fixed-top pad0 width16" data-reactid="349"><a href="/" class="active space-top1 space-left1 pin-topleft icon round dark pad0 fill-blue" data-reactid="350"></a><div class="strong small pad0
          
          space-left4 line-height15" data-reactid="351">Cumulus API</div></div></div></div><!--STOP-->
    <script src='bundle.js'></script>
  </body>
</html>
